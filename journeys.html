<!DOCTYPE html>
<html
  data-wf-page="613675ac9a5d43079675532a"
  data-wf-site="613333e9ce20577884dcc804"
>
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, minimum-scale=1"
    />
    <title>PROCESSO44</title>
    <link href="css/dark-mode.css" rel="stylesheet" type="text/css" />
    <script>
      if (localStorage.getItem("theme") === "dark") {
        document.documentElement.classList.add("dark-mode");
      }
    </script>
    <link href="css/normalize.css" rel="stylesheet" type="text/css" />
    <link href="css/webflow.css" rel="stylesheet" type="text/css" />
    <link href="css/isaque4.webflow.css" rel="stylesheet" type="text/css" />
    <script
      src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"
      type="text/javascript"
    ></script>
    <script type="text/javascript">
      WebFont.load({
        google: {
          families: ["JetBrains Mono:200,300,regular,600,700,800,600italic"],
        },
      });
    </script>
    <link href="images/favicon.png" rel="shortcut icon" type="image/x-icon" />
    <link href="images/webclip.png" rel="apple-touch-icon" />

    <style>
      /* --- Layout & Grid --- */
      body.av {
        margin: 0;
        padding: 0;
        height: 100dvh;
        display: flex;
        flex-direction: column;
        background-color: #f5f5f5; /* Light mode default */
        color: #111; /* Light mode default */
        font-family: "JetBrains Mono", monospace;
        overflow: hidden;
      }

      /* Dark Mode Overrides */
      html.dark-mode body.av {
        background-color: #111;
        color: white;
      }

      .header.wf-section {
        flex-shrink: 0;
        display: block !important;
      }

      .main-container {
        display: grid;
        grid-template-columns: 1fr 2fr 1fr; /* Guidelines, Player, Playlist */
        grid-template-rows: 100%;
        flex: 1;
        height: 100%;
        overflow: hidden;
        /* border-top: 1px solid #ccc; */
      }
      html.dark-mode .main-container {
        /* border-top: 1px solid #333; */
      }

      /* Columns */
      .col-guidelines {
        grid-column: 1;
        border-right: 1px solid black;
        display: flex;
        flex-direction: column;
        background-color: #f5f5f5;
        overflow: hidden;
        position: relative;
      }
      html.dark-mode .col-guidelines {
        background-color: #111;
        border-right: 1px solid #333;
      }

      .col-player {
        grid-column: 2;
        display: flex;
        flex-direction: column;
        background-color: #000;
        position: relative;
        overflow: hidden;
      }

      .col-playlist {
        grid-column: 3;
        border-left: 1px solid black;
        display: flex;
        flex-direction: column;
        background-color: #f5f5f5;
        overflow: hidden;
        position: relative;
      }
      html.dark-mode .col-playlist {
        background-color: #111;
        border-left: 1px solid #333;
      }

      /* Headers */
      .section-header {
        padding: 15px 20px;
        background-color: #e0e0e0;
        font-weight: bold;
        border-bottom: 1px solid #ccc;
        text-transform: uppercase;
        flex-shrink: 0;
        display: flex;
        justify-content: space-between;
        align-items: center;
      }
      html.dark-mode .section-header {
        background-color: #222;
        border-bottom: 1px solid #333;
      }

      /* Scrollable Areas */
      .scroll-wrapper {
        flex: 1;
        position: relative;
        overflow: hidden;
        display: flex;
        flex-direction: column;
      }

      .scroll-content {
        flex: 1;
        overflow-y: auto;
        padding: 0;
      }

      .scroll-fade {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        height: 40px;
        background: linear-gradient(
          to bottom,
          rgba(245, 245, 245, 0),
          rgba(245, 245, 245, 1)
        );
        pointer-events: none;
        z-index: 10;
      }
      html.dark-mode .scroll-fade {
        background: linear-gradient(
          to bottom,
          rgba(17, 17, 17, 0),
          rgba(17, 17, 17, 1)
        );
      }

      /* Custom Scrollbar */
      .scroll-content::-webkit-scrollbar {
        width: 8px;
      }
      .scroll-content::-webkit-scrollbar-track {
        background: #f0f0f0;
      }
      html.dark-mode .scroll-content::-webkit-scrollbar-track {
        background: #111;
      }
      .scroll-content::-webkit-scrollbar-thumb {
        background: #ccc;
        border-radius: 4px;
      }
      html.dark-mode .scroll-content::-webkit-scrollbar-thumb {
        background: #333;
      }
      .scroll-content::-webkit-scrollbar-thumb:hover {
        background: #bbb;
      }
      html.dark-mode .scroll-content::-webkit-scrollbar-thumb:hover {
        background: #555;
      }

      /* --- Player Section --- */
      .player-wrapper {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #000;
        position: relative;
        width: 100%;
        overflow: hidden;
        min-height: 0; /* Allow shrinking */
      }

      .player-wrapper iframe,
      .player-wrapper video {
        width: 100%;
        height: 100%;
        border: none;
      }

      /* Audio Visualizer / Artwork */
      .audio-visualizer {
        position: relative;
        width: 100%;
        height: 100%;
        display: flex;
        flex-direction: column;
        background: #000;
        min-height: 0;
      }

      .audio-artwork {
        flex: 1;
        width: 100%;
        height: auto;
        object-fit: contain; /* Maximize size */
        background-color: #000;
        min-height: 0; /* Allow shrinking */
      }

      .audio-controls {
        width: 100%;
        background-color: #f1f3f4; /* Default browser audio player bg */
        flex-shrink: 0;
      }

      .info-bar {
        padding: 20px;
        background-color: #fff;
        border-top: 1px solid #ccc;
        flex-shrink: 0;
        color: #111;
        max-height: 200px; /* Limit height so player stays visible */
        overflow-y: auto;
        width: 100%;
      }
      html.dark-mode .info-bar {
        background-color: #1a1a1a;
        border-top: 1px solid #333;
        color: #fff;
      }

      .info-tag {
        font-size: 0.8em;
        color: #666;
        text-transform: uppercase;
        letter-spacing: 1px;
        border: 1px solid #666;
        display: inline-block;
        padding: 2px 8px;
        /* margin-bottom: 8px; */
        white-space: nowrap;
      }
      html.dark-mode .info-tag {
        color: #aaa;
        border-color: #aaa;
      }

      .info-title {
        font-size: 1.5em;
        font-weight: bold;
        margin-bottom: 0px;
        line-height: 1;
        text-wrap: balance;
      }

      .info-artist {
        font-size: 1.5em;
        color: #444;
        /* margin-bottom: 5px; */
        line-height: 1;
        text-transform: uppercase;
        border-left: 2px solid #ccc;
        padding-left: 10px;
        text-wrap: balance;
      }
      html.dark-mode .info-artist {
        color: #ddd;
        border-left: 2px solid #484848;
      }

      .info-description {
        font-size: 0.95em;
        line-height: 1.4;
        color: #333;
      }
      html.dark-mode .info-description {
        color: #ccc;
      }

      /* --- File Items (Guidelines & Playlist) --- */
      .file-item {
        position: relative;
        /* padding: 8px 12px; Compact padding */
        margin: 0;
        border: none;
        border-bottom: 1px solid #ccc;
        border-radius: 0;
        transition: all 0.2s ease;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        background-color: transparent;
        width: 100%;
        box-sizing: border-box;
      }
      html.dark-mode .file-item {
        border-bottom: 1px solid #333;
      }

      .file-item:hover {
        background-color: #e0e0e0;
      }
      html.dark-mode .file-item:hover {
        background-color: #222;
      }

      .file-item.active {
        background-color: #e0e0e0;
        /* Removed border-left as requested for cleaner look */
      }
      html.dark-mode .file-item.active {
        background-color: #222;
        /* Removed border-left */
      }

      /* Active item in focused list */
      .col-guidelines.focused .file-item.selected,
      .col-playlist.focused .file-item.selected {
        background-color: #d0d0d0;
      }
      html.dark-mode .col-guidelines.focused .file-item.selected,
      html.dark-mode .col-playlist.focused .file-item.selected {
        background-color: #333;
      }

      /* Playlist Specific Item Layout */
      .playlist-item-content {
        display: flex;
        align-items: flex-start;
        width: 100%;
      }

      .file-icon {
        width: 40px; /* Compact size */
        height: 40px;
        object-fit: cover;
        margin-right: 10px;
        background-color: #ccc;
        flex-shrink: 0;
      }
      html.dark-mode .file-icon {
        background-color: #333;
      }

      .file-info-container {
        flex: 1;
        display: flex;
        flex-direction: column;
        justify-content: center;
      }

      .file-tag {
        font-size: 0.65em;
        color: #666;
        text-transform: uppercase;
        display: block;
        line-height: 1;
        margin-bottom: 6px;
      }
      html.dark-mode .file-tag {
        color: #888;
      }

      .file-title {
        font-weight: 600;
        font-size: 0.95em;
        margin-bottom: 0px;
        color: #111;
        line-height: 1.2;
      }
      html.dark-mode .file-title {
        color: #fff;
      }

      .file-artist {
        font-size: 0.8em;
        color: #444;
        margin-top: 1px;
        line-height: 1.2;
      }
      html.dark-mode .file-artist {
        color: #aaa;
      }

      /* Guidelines Specific Layout */
      .guideline-item {
        padding: 15px 20px;
        text-align: left !important;
        align-items: flex-start !important;
        justify-content: flex-start;
      }
      .guideline-title {
        font-weight: bold;
        margin-bottom: 2px;
        color: #111;
        text-transform: uppercase;
        text-align: left;
      }
      html.dark-mode .guideline-title {
        color: #fff;
      }
      .guideline-desc {
        font-size: 0.9em;
        color: #444;
        line-height: 1.4;
        text-transform: uppercase;
        text-align: left;
        margin-top: 0;
      }
      html.dark-mode .guideline-desc {
        color: #aaa;
      }

      /* Slideshow Styles */
      .slideshow-container {
        width: 100%;
        height: 100%;
        position: relative;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .mySlides {
        display: none;
        width: 100%;
        height: 100%;
        object-fit: contain;
      }
      .mySlides.active {
        display: block;
      }

      /* Intro Overlay */
      .dialoguebg.av {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(255, 255, 255, 0.95);
        z-index: 9999;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .dark-mode .dialoguebg.av {
        background-color: rgba(0, 0, 0, 0.95);
      }
      .dark-mode .dialoguebox2 {
        color: white !important;
      }
      .dark-mode #avbutton {
        color: white !important;
        border: 1px solid white;
      }

      /* Fix arrows in dark mode */
      html.dark-mode .dialoguebox2 img {
        filter: invert(1);
      }

      .dialoguebox2 {
        text-align: center;
        color: black;
        max-width: 800px; /* Increased width significantly */
        width: 90%; /* Responsive width */
        padding: 80px; /* Increased padding */
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        background-color: white; /* Ensure background is white */
        border: 1px solid black; /* Add border for definition */
      }
      html.dark-mode .dialoguebox2 {
        background-color: #111;
        border: 1px solid #333;
      }

      /* Audio Overlay Styles */
      .audio-overlay {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        display: flex;
        align-items: center;
        justify-content: center;
        background-color: #000;
        cursor: pointer;
        z-index: 5;
        transition: opacity 0.5s ease;
      }

      .audio-overlay-image {
        width: 100%;
        height: 100%;
        object-fit: contain;
        opacity: 0.6;
      }

      .audio-play-button {
        position: absolute;
        width: 80px;
        height: 80px;
        background-color: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        backdrop-filter: blur(10px);
        transition: all 0.3s ease;
        border: 1px solid rgba(255, 255, 255, 0.4);
      }

      .audio-overlay:hover .audio-play-button {
        transform: scale(1.1);
        background-color: rgba(255, 255, 255, 0.3);
      }

      #avbutton {
        padding: 15px 30px !important;
        margin-top: 20px;
      }

      /* Footer Overrides */
      .footer.wf-section {
        background-color: transparent !important;
        border-top: 1px solid black;
      }
      html.dark-mode .footer.wf-section {
        border-top: 1px solid #333;
      }

      /* --- Responsive Adjustments --- */
      @media screen and (max-width: 900px) {
        .main-container {
          grid-template-columns: 1fr 1fr;
          grid-template-rows: 50vh 1fr; /* Player fixed height, rest fills */
        }

        .col-player {
          grid-column: 1 / -1; /* Span all columns */
          grid-row: 1;
          border-bottom: 1px solid #ccc;
        }
        html.dark-mode .col-player {
          border-bottom: 1px solid #333;
        }

        .col-guidelines {
          grid-column: 1;
          grid-row: 2;
          border-right: 1px solid #ccc;
        }
        html.dark-mode .col-guidelines {
          border-right: 1px solid #333;
        }

        .col-playlist {
          grid-column: 2;
          grid-row: 2;
          border-left: none;
        }

        .info-bar {
          min-height: unset;
          /* padding: 10px; */
        }

        .info-title {
          font-size: 1.2em;
        }

        .info-artist {
          font-size: 1.2em;
        }

        .file-icon {
          width: 40px;
          height: 40px;
          margin-right: 10px;
        }

        .section-header {
          padding: 10px;
          font-size: 0.9em;
        }

        /* Hide footer on mobile */
        .footer {
          display: none !important;
        }
      }

      /* Lyrics Popover Styles */
      .lyrics-popover {
        display: none;
        position: fixed;
        background: #fff;
        border: 1px solid #ccc;
        padding: 12px;
        z-index: 1000;
        width: 280px;
        max-height: 350px;
        overflow: visible;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        font-size: 0.85em;
        font-family: "JetBrains Mono", monospace;
        border-radius: 6px;
        color: #111;
      }

      html.dark-mode .lyrics-popover {
        background: #222;
        border-color: #444;
        color: #fff;
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.4);
      }

      .lyrics-popover-inner {
        max-height: 300px;
        overflow-y: auto;
        white-space: pre-wrap;
        line-height: 1.5;
      }

      /* Popover Arrow */
      .lyrics-popover::after {
        content: "";
        position: absolute;
        bottom: -7px;
        left: var(--arrow-left, 50%);
        margin-left: -7px;
        width: 14px;
        height: 14px;
        background: #fff;
        border-bottom: 1px solid #ccc;
        border-right: 1px solid #ccc;
        transform: rotate(45deg);
        z-index: 1;
      }

      /* Arrow for bottom placement */
      .lyrics-popover.bottom::after {
        bottom: auto;
        top: -7px;
        border-bottom: none;
        border-right: none;
        border-top: 1px solid #ccc;
        border-left: 1px solid #ccc;
      }

      html.dark-mode .lyrics-popover::after {
        background: #222;
        border-color: #444;
      }

      /* Lyrics Title */
      .lyrics-title {
        font-size: 0.7em;
        text-transform: uppercase;
        color: #666;
        margin: 0 0 8px 0;
        font-weight: 600;
        letter-spacing: 0.05em;
        border-bottom: 1px solid #ccc;
        padding-bottom: 6px;
      }

      html.dark-mode .lyrics-title {
        color: #aaa;
        border-color: #444;
      }

      /* Lyrics Button Styles */
      .lyrics-btn {
        display: none;
        background-color: #f1f5f9;
        border: 1px solid #e2e8f0;
        border-radius: 6px;
        cursor: pointer;
        padding: 6px;
        margin-left: 8px;
        color: #64748b;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
      }

      html.dark-mode .lyrics-btn {
        background-color: #333;
        border-color: #444;
        color: #aaa;
      }

      .lyrics-btn:hover {
        background-color: #ddd;
        color: #111;
      }

      html.dark-mode .lyrics-btn:hover {
        background-color: #444;
        color: #fff;
      }
    </style>
  </head>
  <body class="body av">
    <!-- Intro Overlay -->
    <div id="intro-overlay" class="dialoguebg av">
      <div class="dialoguebox2">
        <div style="margin-bottom: 20px">
          <strong>WELCOME!</strong><br /><br />Here you can navigate through
          some of my music and films.
        </div>
        <img
          width="50px"
          style="margin: 15px"
          src="images/keyarrows.png"
          alt="Navigation Arrows"
        />
        <br />
        <div>
          <button
            id="avbutton"
            style="
              background: transparent;
              border: 1px solid #ccc;
              padding: 10px 20px;
              cursor: pointer;
              font-family: inherit;
              font-weight: bold;
            "
          >
            LET'S GO!
          </button>
        </div>
      </div>
    </div>

    <!-- Lyrics Popover -->
    <div id="lyrics-popover" class="lyrics-popover">
      <div class="lyrics-title">Lyrics</div>
      <div class="lyrics-popover-inner">
        <div id="lyrics-content"></div>
      </div>
    </div>

    <!-- Header -->
    <div class="header wf-section" data-project-name="PROCESSO44"></div>

    <!-- Main App Container -->
    <div class="main-container">
      <!-- Guidelines Column -->
      <div class="col-guidelines" id="col-guidelines">
        <div class="section-header">GUIDELINES</div>
        <div class="scroll-wrapper">
          <div class="scroll-content" id="guidelines-container">
            <!-- Guidelines injected via JS -->
          </div>
          <div class="scroll-fade"></div>
        </div>
      </div>

      <!-- Player Section -->
      <div class="col-player">
        <div class="player-wrapper" id="player-wrapper">
          <!-- Content injected via JS -->
        </div>
        <div class="info-bar">
          <div
            style="
              display: flex;
              align-items: center;
              gap: 10px;
              margin-bottom: 8px;
              justify-content: start;
            "
          >
            <span class="info-tag" id="info-tag">Type</span>
            <span class="info-title" id="info-title">Title</span>
            <span class="info-artist" id="info-artist">Artist</span>
            <button id="lyrics-btn" class="lyrics-btn" title="Show Lyrics">
              <svg
                width="16"
                height="16"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                stroke-linecap="round"
                stroke-linejoin="round"
              >
                <path
                  d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"
                ></path>
                <polyline points="14 2 14 8 20 8"></polyline>
                <line x1="16" y1="13" x2="8" y2="13"></line>
                <line x1="16" y1="17" x2="8" y2="17"></line>
                <line x1="10" y1="9" x2="8" y2="9"></line>
                <path d="M9 22v-4h4v4" style="opacity: 0"></path>
                <!-- Spacer -->
                <path d="M19 15V9" style="display: none"></path>
                <!-- Hidden note part -->
                <circle
                  cx="18"
                  cy="18"
                  r="2"
                  fill="currentColor"
                  style="opacity: 0.8"
                ></circle>
                <path d="M18 18V14" style="opacity: 0.8"></path>
              </svg>
            </button>
          </div>
          <div class="info-description" id="info-desc">Description</div>
        </div>
      </div>

      <!-- Playlist Column -->
      <div class="col-playlist" id="col-playlist">
        <div class="section-header">PLAYLIST</div>
        <div class="scroll-wrapper">
          <div class="scroll-content" id="playlist-items">
            <!-- Items injected via JS -->
          </div>
          <div class="scroll-fade"></div>
        </div>
      </div>
    </div>

    <div class="footer wf-section">
      <div class="contactbye about">
        <div class="me">
          <span>CURRENTLY AT SENEDA & ABRUCIO</span>
        </div>
        <div class="contactblock">
          <div class="linkmesmobox">
            <span class="contact">HELLO@ISAQUE.ME</span>

            <a href="about.html" class="contact">ABOUT</a>
          </div>
        </div>
      </div>
    </div>
    <div id="hover-box"></div>

    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="js/webflow.js" type="text/javascript"></script>
    <script src="js/header-component.js" type="text/javascript"></script>

    <script>
      // --- Data ---
      const rules = [
        {
          ruleName: "⓪ WELCOME TO PROCESSO44",
          ruleDescr:
            "THESE GUIDELINES AIM TO SEPARATE UKULELE OPEN-MIC FREMDSCHAM FROM VISCERAL GOSPEL OUTPUT.",
        },
        {
          ruleName: "① Yell A Message Like You Had the Right to Be Heard",
          ruleDescr:
            "This is really the only point to be made here. YOU DON'T NEED TOOLS. You don't need any of these guidelines. They're already dated in face of the thing you wanna say. YOU JUST NEED A MESSAGE, YOU JUST NEED TO TALK.",
        },
        {
          ruleName: "② Harvest from Soul",
          ruleDescr: "Piece must speak to a physical feeling in your body.",
        },
        {
          ruleName: "③ Be the Bold Captain of a Journey",
          ruleDescr:
            "You've found a gold mine in the distance, and you're taking the audience there. So allow them to relax. Take care of them. You're a tour guide, and the city your showing is totally worth it.",
        },
        {
          ruleName: "④ Draft in Bulk, with Randomness",
          ruleDescr:
            "Trust the cosmic rays in giving you assistance to put things together the way they should. From modular synths to Excel files. Use randomness to get to a complete birds eye view draft you’re happy-ish with ASAP.",
        },
        {
          ruleName: "⑤ Finish Authentic, Raw, & ASAP",
          ruleDescr:
            "Fuck production value. Fixed lens. Use a single synth texture. Get form out of the way. Simplify the setup and let the content speak. Anyone with access to your tools could have done this. What gives is your heart. Music recorded in a single track with voice and instrument without BPM then worked around the momentum.",
        },
        {
          ruleName: "⑥ Conclude as an Offering Pitch",
          ruleDescr:
            "Finish to the point of offering to God. Trust that God is your most avant-garde creative partner and executive producer and can see the soul past the production value. You are trying to put together a pitch to God. It's like you're showing him a menu for your restaurant.",
        },
        {
          ruleName: "⑦ Only Flow State",
          ruleDescr:
            "There's no 'I have to mix this'. If you don't know how to mix, you'll ship it as is. Do not beat yourself up. Do not edit while you create. Only think about outcome / distribution once the product is finished.",
        },
        {
          ruleName: "⑧ Be Synesthetic",
          ruleDescr:
            "How the fuck are you supposed to express a piece of your soul through a single medium? Multi-modal expression.",
        },
        {
          ruleName: "⑨ Disrespect Copyright",
          ruleDescr:
            "Fair use the shit out of everything you love. If you're a fan, that's also yours. Hope to be taken down.",
        },
        {
          ruleName: "⑩ Fuck Algorithms + Capital",
          ruleDescr:
            "Free-access, own-server, non-profit, main storage is offline. A website called PROCESSO44 in mono font with a list of everything being shipped, ranked by most recent date, and a list of principles. We don't fuck with billionaires and we don't contribute to technofeudalism.",
        },
        {
          ruleName: "⑪ Get the Crew",
          ruleDescr:
            "Invite people you trust to drop their stuff in. 200-people farms are the only antidote to algorithms. Your output was never yours, and you'll see that when you bring other people's hues into the canvas.",
        },
        {
          ruleName: "⑫ Get Unoriginal",
          ruleDescr:
            "Aim at being accused of being unoriginal, and of replicating ideas that have been done 'way too much' already. You need them.",
        },
        {
          ruleName: "⑬ Get Lame",
          ruleDescr:
            "Say awkward truths you feel like saying, especially if you're 'reinventing the wheel', or 'about to ruin your career', or 'finally getting caught as an impostor'. Sample Coldplay. It's a terrible idea and it won’t work.",
        },
        {
          ruleName: "⑭ Get Hated",
          ruleDescr:
            "Not only disrespect the 'minimum requirements' for what a song is. Aim at making at least 30-40% of the world throw up.",
        },
        {
          ruleName: "⑮ Get Dunning–Kruger-ing",
          ruleDescr:
            "Fuck being a virtuoso. Use tools you don't know how to use. Intuition and instincts bring greater ideas than rationality. Do not allow 'experts' to edit you through invasive thoughts.",
        },
        {
          ruleName: "⑯ Unlearn Templates",
          ruleDescr:
            "Become a native person getting in touch with a drum kit for the first time ever. How would that look like? Maybe you wouldn't sit. Maybe you would throw pieces of the drum kit around, and that would express your joy of having found a wild horse.",
        },
        {
          ruleName: "⑰ Get the Word Out",
          ruleDescr:
            "Ship a short 30-sec preview that captures the momentum. Fuck feeds. Only emails or DMs of a single preview file. Send the file, not a link. Website features a newsletter for notifications about new stuff.",
        },
        {
          ruleName: "⑱ Ship Daily",
          ruleDescr:
            "It's a diary entry, so there's no right or wrong. A daily podcast showcases artist + excerpt of piece in under 10mins. And if you ship often, your brain believes it's worth creating more — because there's always tomorrow's file.",
        },
        {
          ruleName: "⑲ Faith in the Randomness of Love/Hate",
          ruleDescr:
            "People love/hate everything based on random factors outside of your control. That's good news because it means there's always going to be some people who are into / cringe at your stuff, anywhere from an Ed Sheeran cover to your Marina Abramovićing.",
        },
        {
          ruleName: "⑳ EXPAND VOCABULARY THROUGH MENTORSHIP",
          ruleDescr:
            "YELLING REQUIRES WORDS, AND WORDS MUST BE LEARNED. WORDS (VERBAL, MUSICAL, OR VISUAL) EXPRESS SEMANTIC SPACES. SO MAKE SURE YOU LEARN ABOUT THE WORDS AND ABOUT THE SEMANTIC SPACES. COLTRANE INNOVATED BY REARRANGING THE WORDS OF A TRADITIONAL JAZZ PIECE INTO A NEW SEMANTIC SPACE HE SAW NECESSARY. SO GET REFS FOR WORDS AND SEMANTICS. S/O ROBERT GREENE.",
        },
        {
          ruleName: "⑳① BE UNSCALABLE",
          ruleDescr:
            "You don't wanna be famous. Happiness comes from depth, not quantity of connections. Do performance that doesn’t scale. Not as a coveted, delayed gratification narcissistic soon-to-be-laurelled move. It's not about being numbers famous, it's about being impact famous. Do performance that doesn't scale so you can focus on crafting a highly tailored message for the unique humans you’re speaking with. They’re all that matters for as long as the performance lasts. The reason why we do not mix or master is to break up with the scalability sanitization game. Fuck Britney Spears. In fact you want to do the opposite of Britney Spears. Your output is SO DAMN SPECIFICALLY BUILT FOR THAT UNIQUE AUDIENCE, that it gets your label manager fired since there’s nothing capitalism he can do with it.",
        },
        {
          ruleName: "⑳② BE SUBTLE",
          ruleDescr:
            "I had a dream I was part of a scenium and I impacted people here and there with soft revolutions. Constant mild disobedience isn't threatening to incumbents — and that's why it's so effective. In my dream, I offered gifts that eventually made Bon iver get a new grammy.",
        },
        {
          ruleName: "⑳③ BECOME A NEPO NEPHEW",
          ruleDescr:
            "Survivorship bias is a thing, obviously: a lot of people who make it are nepo babies. But that’s a good thing because you can talk to people and turn yourself into an honorary nepo nephew. The belief that only the rich make it is paralyzing and ALSO a narrative and ALSO an illusion.",
        },
        {
          ruleName: "⑳④ BE UNDECIDED: RELEASE MULTIPLE VERSIONS",
          ruleDescr:
            "Listen to any Deluxe Beatles album. They should've released all the 26 takes of Strawberry Fields Forever at once with demos included. But a 700 vinyl track isn't exactly optimized for sales, or the laws of physics. We no longer have either of those constraints. So don't pretend a song is a monolith. It changes like your god damn set of cells. For fuck's sake, it's not like take 7 had some mystical presence that take 16 didn't also have. Don't buy into the global optimum myth. There are no spectacular super humans (even though the capital really needs to nurture that fallacy). You in fact reach local optima, each time with a different part of you. You're fucking alive, and that means vectors in a space of possibility. And your music, an extension of you within those everchanging states.",
        },
      ];

      const avContent = [
        {
          title: "THE GUAPORÉ AKODONT",
          type: "Short Film",
          artist: "Isaque Seneda",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/585520267?h=d96f90b929&title=0&byline=0&portrait=0",
          description: "Shot in Transylvania.",
          thumbnail:
            "https://i.vimeocdn.com/video/1211638486-bd020fd1c8608924f0b3f46c0bf2f53e06306e7163ef46e14c57d92ac6362717-d?mw=80&q=85", // Placeholder
        },
        {
          title: "I SEE YOU OUT THE WINDOW",
          type: "Music",
          artist: "DO FUTURO",
          contentType: "audio",
          url: "44/files/DO-FUTURO-i-see-you-out-the-window-1.mp3",
          thumbnail: "44/files/DO-FUTURO-i-see-you-out-the-window-1.jpg",
          description: "i see you out the window",
          lyrics: `i see you out the window,
without your sermon
hug, tell me the wind brought
a lover’s sovereign
without farewell

aaah hmmmm

i see you in the mirror,
and i remember,
uh, hugs are out the window
farewell.

he, who hopped the far lands,
shall never be mended. will i?

will i be mended?
will i be?`.trim(),
        },
        {
          title: "I SEE YOU OUT THE WINDOW (LIVE)",
          type: "Music",
          artist: "DO FUTURO",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/1vUp3uagWJ4",
          thumbnail:
            "https://i.ytimg.com/vi/1vUp3uagWJ4/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AH-CYAC0AWKAgwIABABGEcgEyh_MA8=&rs=AOn4CLD2Et2UlUQNFpRgtvl-_jhhCfFiNA",
          description: "Live version of 'I See You Out The Window'.",
        },
        {
          title: "UNBURDEN",
          type: "Album",
          artist: "DO FUTURO",
          contentType: "spotify",
          url: "https://open.spotify.com/embed/album/6xaZrtMEdxRkUc6lEOtWpK?utm_source=generator&theme=0",
          description:
            '"unburden" is a coming-of-age folktronica project about being away from home. You can listen to the complete album on Spotify.',
          thumbnail: "images/webclip.png",
        },
        {
          title: "SHOW ME THE WAY",
          type: "Music Video",
          artist: "DO FUTURO",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/530465586?h=d96f90b929&title=0&byline=0&portrait=0",
          description: "A music video for unburden.",
          thumbnail:
            "https://i.ytimg.com/vi/lpZene4AeqM/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AH-BIAC4AOKAgwIABABGHIgPChEMA8=&rs=AOn4CLA7jnsecclVmYDMxNpdHiH8yHnCEA",
        },
        {
          title: "BRANDING & JESUS: WHY GOOD BRANDS PREACH",
          type: "Lecture",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/0dpdGdBMrR4",
          description: "Lecture given at MY-EASTER 2025.",
          thumbnail: "https://i.ytimg.com/vi/0dpdGdBMrR4/hqdefault.jpg",
        },
        {
          title:
            "SOCIETY OF THE SPECTACLE, THE TYRANNY OF MERIT, AND WHY YOU SHOULDN'T FOLLOW YOUR DREAMS",
          type: "Lecture",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/1XQnKSUwWMs",
          description: "Lecture given at MY-CAMP 2024.",
          thumbnail: "https://i.ytimg.com/vi/1XQnKSUwWMs/hqdefault.jpg",
        },
        {
          title:
            "DEATH OF PRODUCTION VALUE: CREATIVITY GUIDELINES TO FUCK THE SYSTEM",
          type: "Lecture",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/IQ9s_hDIIYo",
          description: "Lecture given at MY-CAMP 2024.",
          thumbnail: "https://i.ytimg.com/vi/IQ9s_hDIIYo/hqdefault.jpg",
        },
        {
          title: "PSYCHOMETRICS: HOW THE BIG 5 CAME TO BE",
          type: "Lecture",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/TGz4Rb15aVY",
          description: "Lecture given at MY-CAMP 2024.",
          thumbnail: "https://i.ytimg.com/vi/TGz4Rb15aVY/hqdefault.jpg",
        },
        {
          title: "FALL 2",
          type: "Music Video",
          artist: "DO FUTURO",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/601039720?h=d96f90b929&title=0&byline=0&portrait=0",
          description: "A music video for unburden.",
          thumbnail:
            "https://i.ytimg.com/vi/XKCXClXmruE/hqdefault.jpg?sqp=-oaymwFBCNACELwBSFryq4qpAzMIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB8AEB-AHOBYAC0AWKAgwIABABGH8gLCg-MA8=&rs=AOn4CLDt4MYhaKBUDep-ZjA-QgehfRsQvw",
        },
        {
          title: "AA",
          type: "Music Video",
          artist: "DO FUTURO",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/274861469?h=d96f90b929&title=0&byline=0&portrait=0",
          description: "A music video for the first single of DO FUTURO.",
          thumbnail:
            "https://i.ytimg.com/vi/XWcEweuVWk0/hqdefault.jpg?sqp=-oaymwEnCNACELwBSFryq4qpAxkIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB&rs=AOn4CLA45PiKp3K2BcRf4lmtpAzuGH_X3g",
        },
        {
          title: "MOMO’s",
          type: "Music Video",
          artist: "Isaque Seneda",
          contentType: "local-video",
          url: "videos/momo.mp4",
          description: "A music video for James Blake’s song.",
          thumbnail:
            "https://i.vimeocdn.com/video/1459588830-8273080b3ba57c0478e24d95d358d3462f3521516e9cc5052db5b8aff5e09cad-d?mw=80&q=85",
        },
        {
          title: "DOWNTOWN SAO PAULO",
          type: "Photography",
          artist: "Isaque Seneda",
          contentType: "slideshow",
          images: [
            "images/Mockup-min.png",
            "images/blei3.png",
            "images/blei4.png",
            "images/blei5.png",
            "images/blei6.png",
            "images/blei7.png",
          ],
          description:
            "São Paulo is the epicenter of diversity in Brazil. In this series, we look at glimpses of social inequality and a nostalgic Paulista architecture.",
          thumbnail: "images/blei3.png",
        },
        {
          title: "HANDBALL",
          type: "Short Film",
          artist: "Isaque Seneda",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/491797650?h=d96f90b929&title=0&byline=0&portrait=0",
          description: "Shot in the woods.",
          thumbnail:
            "https://i.vimeocdn.com/video/1017134081-d4c41dc3de0c301404bc5267f9295df711096e6481bf1d6dd11c20df125689f1-d?mw=80&q=85",
        },
        {
          title: "FALL (Live)",
          type: "Music",
          artist: "DO FUTURO & Três Sóis",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/p195iZ8t0DU",
          description:
            "Live performance of 'Fall' on Ministry of Foreign Affairs.",
          thumbnail:
            "https://i.ytimg.com/vi/p195iZ8t0DU/hqdefault.jpg?sqp=-oaymwEnCNACELwBSFryq4qpAxkIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB&rs=AOn4CLAqyhs4HBvjYZCtKDt2ibUy-Dhkiw",
        },
        {
          title: "ALL I WANT (LIVE)",
          type: "Music",
          artist: "DO FUTURO",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/WX7f8pg8lkc",
          description:
            "Live performance of 'All I Want' on Ministry of Foreign Affairs.",
          thumbnail:
            "https://i.ytimg.com/vi/WX7f8pg8lkc/hqdefault.jpg?sqp=-oaymwEnCNACELwBSFryq4qpAxkIARUAAIhCGAHYAQHiAQoIGBACGAY4AUAB&rs=AOn4CLA45PiKp3K2BcRf4lmtpAzuGH_X3g",
        },
        {
          title: "LIGHTS ON SILENCE",
          type: "Audiovisual Project",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/K32qxqiB1H4",
          description: "Graduation project WdKA Audiovisual design year 1.",
          thumbnail: "https://i.ytimg.com/vi/K32qxqiB1H4/hqdefault.jpg",
        },
        {
          title: "RAW 2",
          type: "Audiovisual Project",
          artist: "Isaque Seneda",
          contentType: "vimeo",
          url: "https://player.vimeo.com/video/448470733",
          description: "First experiment with magic lantern raw canon 7d.",
          thumbnail:
            "https://i.vimeocdn.com/video/941489327-be1f9712889340f353df5a5b898975cee8d8d2c3ac0b60fa9500121885671a25-d?mw=80&q=85",
        },
        {
          title: "SZOLNOK EXPLORERS",
          type: "Pilot",
          artist: "Isaque Seneda",
          contentType: "youtube",
          url: "https://www.youtube.com/embed/IEsdeTEjBdQ",
          description: "Pilot episode: Szolnok Explorers.",
          thumbnail: "https://i.ytimg.com/vi/IEsdeTEjBdQ/hqdefault.jpg",
        },
      ];

      let currentIndex = 0;
      let currentGuidelineIndex = 0;
      let activeColumn = "playlist"; // 'playlist' or 'guidelines'
      let slideshowInterval;

      // --- Render Functions ---

      function renderGuidelines() {
        const container = document.getElementById("guidelines-container");
        container.innerHTML = "";
        rules.forEach((rule, index) => {
          const div = document.createElement("div");
          div.className = "file-item guideline-item";
          div.onclick = () => {
            activeColumn = "guidelines";
            currentGuidelineIndex = index;
            updateFocus();
          };
          div.innerHTML = `
                <div class="guideline-title">${rule.ruleName}</div>
                <div class="guideline-desc">${rule.ruleDescr}</div>
            `;
          container.appendChild(div);
        });

        // Add spacer for scroll fade
        const spacer = document.createElement("div");
        spacer.style.height = "60px";
        spacer.style.flexShrink = "0";
        container.appendChild(spacer);
      }

      function renderPlaylist() {
        const container = document.getElementById("playlist-items");
        container.innerHTML = "";
        avContent.forEach((item, index) => {
          const div = document.createElement("div");
          div.className = "file-item";
          div.onclick = () => {
            activeColumn = "playlist";
            loadContent(index);
            updateFocus();
          };

          // Tag above title
          div.innerHTML = `
          <div class="playlist-item-content">
            <img src="${item.thumbnail}" class="file-icon" alt="thumb">
            <div class="file-info-container">
                <div class="file-tag">${item.type}</div>
                <div class="file-title">${item.title}</div>
                <div class="file-artist">${item.artist}</div>
            </div>
          </div>
        `;
          container.appendChild(div);
        });

        // Add spacer for scroll fade
        const spacer = document.createElement("div");
        spacer.style.height = "60px";
        spacer.style.flexShrink = "0";
        container.appendChild(spacer);
      }

      function updateListStyles() {
        // Guidelines
        const guidelineItems = document.querySelectorAll(
          "#guidelines-container .file-item"
        );
        guidelineItems.forEach((item, index) => {
          if (
            index === currentGuidelineIndex &&
            activeColumn === "guidelines"
          ) {
            item.classList.add("selected");
          } else {
            item.classList.remove("selected");
          }
        });

        // Playlist
        const playlistItems = document.querySelectorAll(
          "#playlist-items .file-item"
        );
        playlistItems.forEach((item, index) => {
          // Active (playing)
          if (index === currentIndex) {
            item.classList.add("active");
          } else {
            item.classList.remove("active");
          }

          // Selected (focus)
          if (index === currentIndex && activeColumn === "playlist") {
            item.classList.add("selected");
          } else {
            item.classList.remove("selected");
          }
        });
      }

      function updateFocus() {
        // Update column focus styles
        document
          .getElementById("col-guidelines")
          .classList.toggle("focused", activeColumn === "guidelines");
        document
          .getElementById("col-playlist")
          .classList.toggle("focused", activeColumn === "playlist");

        updateListStyles();

        // Scroll to view
        if (activeColumn === "guidelines") {
          const el = document.getElementById("guidelines-container").children[
            currentGuidelineIndex
          ];
          if (el) el.scrollIntoView({ behavior: "smooth", block: "nearest" });
        } else {
          const el =
            document.getElementById("playlist-items").children[currentIndex];
          if (el) el.scrollIntoView({ behavior: "smooth", block: "nearest" });
        }
      }

      function loadContent(index) {
        currentIndex = index;
        const item = avContent[index];
        const playerWrapper = document.getElementById("player-wrapper");

        // Update Info
        document.getElementById("info-tag").innerText = item.type;
        document.getElementById("info-title").innerText = item.title;
        document.getElementById("info-artist").innerText = item.artist;
        document.getElementById("info-desc").innerText = item.description;

        // Lyrics Button Logic
        const lyricsBtn = document.getElementById("lyrics-btn");
        const lyricsPopover = document.getElementById("lyrics-popover");

        if (item.lyrics) {
          lyricsBtn.style.display = "inline-flex";
          lyricsBtn.onclick = (e) => {
            e.stopPropagation();

            // Toggle visibility
            if (lyricsPopover.style.display === "block") {
              lyricsPopover.style.display = "none";
              return;
            }

            // Set content (trim to remove leading/trailing whitespace)
            document.getElementById("lyrics-content").innerText =
              item.lyrics.trim();

            // Position and show
            lyricsPopover.style.display = "block";

            // Calculate position (above the button)
            const btnRect = lyricsBtn.getBoundingClientRect();
            const popoverRect = lyricsPopover.getBoundingClientRect();

            // Position above the button, centered horizontally relative to button
            let top = btnRect.top - popoverRect.height - 12; // 12px gap for arrow
            let left = btnRect.left + btnRect.width / 2 - popoverRect.width / 2;

            // Ensure it doesn't go off screen
            if (left < 10) left = 10;
            if (left + popoverRect.width > window.innerWidth - 10) {
              left = window.innerWidth - popoverRect.width - 10;
            }

            // Adjust arrow position if popover is shifted
            // We need to set the arrow's left position relative to the popover
            // The arrow is ::after, so we can't easily change its style via JS directly on the element
            // But we can use a CSS variable or just rely on centering if the popover is centered.
            // If the popover hits the edge, the arrow (centered on popover) won't point to the button.
            // Let's fix this by setting a custom property for arrow position
            const arrowLeft = btnRect.left + btnRect.width / 2 - left;
            lyricsPopover.style.setProperty("--arrow-left", `${arrowLeft}px`);

            if (top < 10) {
              // If not enough space above, show below?
              // For now, let's just pin to top if it's too high, but that might cover the button.
              // Ideally we'd flip it.
              if (
                btnRect.bottom + popoverRect.height + 12 <
                window.innerHeight
              ) {
                top = btnRect.bottom + 12;
                lyricsPopover.classList.add("bottom");
              } else {
                top = 10;
              }
            } else {
              lyricsPopover.classList.remove("bottom");
            }

            lyricsPopover.style.top = `${top}px`;
            lyricsPopover.style.left = `${left}px`;
          };
        } else {
          lyricsBtn.style.display = "none";
          if (lyricsPopover) lyricsPopover.style.display = "none";
        }

        // Clear previous content
        playerWrapper.innerHTML = "";
        clearInterval(slideshowInterval);

        // Render Content
        if (
          item.contentType === "vimeo" ||
          item.contentType === "youtube" ||
          item.contentType === "spotify"
        ) {
          const iframe = document.createElement("iframe");
          let url = item.url;
          // Removed origin hack which might cause Error 153 on local/restricted envs
          // if (item.contentType === "youtube") {
          //   const separator = url.includes("?") ? "&" : "?";
          //   url += `${separator}origin=${window.location.origin}`;
          // }
          iframe.src = url;
          iframe.allow =
            "accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; fullscreen";
          iframe.allowFullscreen = true;
          playerWrapper.appendChild(iframe);
        } else if (item.contentType === "local-video") {
          const video = document.createElement("video");
          video.src = item.url;
          video.controls = true;
          video.style.width = "100%";
          video.style.height = "100%";
          playerWrapper.appendChild(video);
        } else if (item.contentType === "slideshow") {
          const container = document.createElement("div");
          container.className = "slideshow-container";
          item.images.forEach((imgSrc, i) => {
            const img = document.createElement("img");
            img.src = imgSrc;
            img.className = `mySlides ${i === 0 ? "active" : ""}`;
            container.appendChild(img);
          });
          playerWrapper.appendChild(container);
          startSlideshow();
        } else if (item.contentType === "audio") {
          // Audio Visualizer / Player
          const container = document.createElement("div");
          container.className = "audio-visualizer";

          // Container for artwork + overlay
          const artworkContainer = document.createElement("div");
          artworkContainer.style.flex = "1";
          artworkContainer.style.position = "relative";
          artworkContainer.style.width = "100%";
          artworkContainer.style.overflow = "hidden";
          artworkContainer.style.backgroundColor = "#000";
          artworkContainer.style.minHeight = "0"; // Allow shrinking
          artworkContainer.style.cursor = "pointer"; // Indicate clickable

          const audio = document.createElement("audio");
          audio.src = item.url;
          audio.controls = true;
          audio.className = "audio-controls";
          audio.autoplay = false;

          // Overlay
          const overlay = document.createElement("div");
          overlay.className = "audio-overlay";
          // Click handled by container now

          const overlayImg = document.createElement("img");
          overlayImg.src = item.thumbnail;
          overlayImg.className = "audio-overlay-image";

          const playBtn = document.createElement("div");
          playBtn.className = "audio-play-button";
          playBtn.innerHTML = `<svg width="32" height="32" viewBox="0 0 24 24" fill="white" xmlns="http://www.w3.org/2000/svg" style="margin-left: 4px"><path d="M8 5V19L19 12L8 5Z" /></svg>`;

          overlay.appendChild(overlayImg);
          overlay.appendChild(playBtn);

          // Background Image (underneath overlay)
          const bgImg = document.createElement("img");
          bgImg.src = item.thumbnail;
          bgImg.className = "audio-artwork";
          bgImg.style.width = "100%";
          bgImg.style.height = "100%";
          bgImg.style.objectFit = "contain";

          artworkContainer.appendChild(bgImg);
          artworkContainer.appendChild(overlay);

          // Click anywhere on artwork container to toggle play/pause
          artworkContainer.onclick = function () {
            if (audio.paused) {
              if (overlay.style.display !== "none") {
                overlay.style.opacity = 0;
                setTimeout(() => {
                  overlay.style.display = "none";
                }, 500);
              }
              audio.play();
            } else {
              audio.pause();
            }
          };

          container.appendChild(artworkContainer);
          container.appendChild(audio);
          playerWrapper.appendChild(container);
        }

        // Update Playlist UI (to show active item)
        updateListStyles();

        // Update URL Hash
        window.location.hash = `#${index + 1}`;
      }

      function startSlideshow() {
        let slideIndex = 0;
        const slides = document.querySelectorAll(".mySlides");
        if (slides.length === 0) return;

        slideshowInterval = setInterval(() => {
          slides[slideIndex].classList.remove("active");
          slideIndex = (slideIndex + 1) % slides.length;
          slides[slideIndex].classList.add("active");
        }, 3000);
      }

      // Global Spacebar Listener
      document.addEventListener("keydown", function (event) {
        if (
          event.code === "Space" &&
          event.target.tagName !== "INPUT" &&
          event.target.tagName !== "TEXTAREA"
        ) {
          event.preventDefault(); // Prevent scrolling
          togglePlayback();
        }
      });

      function togglePlayback() {
        const item = avContent[currentIndex];
        if (item.contentType === "audio") {
          const audio = document.querySelector("#player-wrapper audio");
          if (audio) {
            if (audio.paused) {
              // If overlay is there, hide it
              const overlay = document.querySelector(".audio-overlay");
              if (overlay && overlay.style.display !== "none") {
                overlay.style.opacity = 0;
                setTimeout(() => {
                  overlay.style.display = "none";
                }, 500);
              }
              audio.play();
            } else {
              audio.pause();
            }
          }
        } else if (item.contentType === "local-video") {
          const video = document.querySelector("#player-wrapper video");
          if (video) {
            video.paused ? video.play() : video.pause();
          }
        }
      }

      // Intro Overlay Logic
      document.addEventListener("DOMContentLoaded", function () {
        const overlay = document.getElementById("intro-overlay");
        const btn = document.getElementById("avbutton");

        // Lyrics Popover Logic
        const lyricsPopover = document.getElementById("lyrics-popover");

        // Close popover when clicking outside
        document.addEventListener("click", (e) => {
          const lyricsBtn = document.getElementById("lyrics-btn");
          if (
            lyricsPopover &&
            lyricsPopover.style.display === "block" &&
            !lyricsPopover.contains(e.target) &&
            e.target !== lyricsBtn &&
            !lyricsBtn.contains(e.target)
          ) {
            lyricsPopover.style.display = "none";
          }
        });

        document.addEventListener("keydown", (e) => {
          if (
            e.key === "Escape" &&
            lyricsPopover &&
            lyricsPopover.style.display === "block"
          ) {
            lyricsPopover.style.display = "none";
          }
        });

        // Check LocalStorage
        if (localStorage.getItem("introShown") === "true") {
          overlay.style.display = "none";
        }

        function hideOverlay() {
          overlay.style.display = "none";
          localStorage.setItem("introShown", "true");
          // Focus playlist by default
          updateFocus();
        }

        btn.addEventListener("click", hideOverlay);

        document.addEventListener("keydown", function (event) {
          if (overlay.style.display !== "none") {
            if (
              [
                "Enter",
                " ",
                "ArrowUp",
                "ArrowDown",
                "ArrowLeft",
                "ArrowRight",
              ].includes(event.key)
            ) {
              hideOverlay();
            }
            return;
          }

          // Navigation Logic
          if (event.key === "ArrowLeft") {
            if (activeColumn === "playlist") {
              activeColumn = "guidelines";
              updateFocus();
            }
          } else if (event.key === "ArrowRight") {
            if (activeColumn === "guidelines") {
              activeColumn = "playlist";
              updateFocus();
            }
          } else if (event.key === "ArrowUp") {
            if (activeColumn === "playlist") {
              const nextIndex =
                (currentIndex - 1 + avContent.length) % avContent.length;
              loadContent(nextIndex);
              updateFocus(); // Ensure scroll
            } else {
              currentGuidelineIndex =
                (currentGuidelineIndex - 1 + rules.length) % rules.length;
              updateFocus();
            }
          } else if (event.key === "ArrowDown") {
            if (activeColumn === "playlist") {
              const nextIndex = (currentIndex + 1) % avContent.length;
              loadContent(nextIndex);
              updateFocus(); // Ensure scroll
            } else {
              currentGuidelineIndex =
                (currentGuidelineIndex + 1) % rules.length;
              updateFocus();
            }
          }
        });

        // Initial Load
        renderGuidelines();

        const hash = window.location.hash;
        if (hash) {
          const tabNum = parseInt(hash.substr(1)) - 1;
          if (!isNaN(tabNum) && tabNum >= 0 && tabNum < avContent.length) {
            currentIndex = tabNum;
          }
        }

        renderPlaylist();
        loadContent(currentIndex);
        updateFocus();
      });
    </script>
  </body>
</html>
