<!DOCTYPE html>
<html lang="pt-BR">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta
      name="apple-mobile-web-app-status-bar-style"
      content="black-translucent"
    />
    <meta name="apple-mobile-web-app-title" content="Seneda Paris" />
    <link
      rel="apple-touch-icon"
      href="https://img.icons8.com/fluency/192/macaron.png"
    />

    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Playfair+Display:ital,wght@0,600;1,600&display=swap"
      rel="stylesheet"
    />

    <title>Seneda Paris</title>

    <style>
      :root {
        --primary: #2c3e50;
        --accent: #c5a065;
        --bg: #faf9f6;
        --card-bg: #ffffff;
        --soft-blue: #e8f4f8;
        --soft-green: #e3f2e1;
        --soft-red: #fadbd8;
        --warning-bg: #fff3e0;
        --warning-text: #e65100;

        --font-main: "Nunito", sans-serif;
        --font-head: "Playfair Display", serif;

        --radius: 24px;
        --shadow: 0 10px 30px -10px rgba(0, 0, 0, 0.08);
      }

      * {
        box-sizing: border-box;
        -webkit-tap-highlight-color: transparent;
      }

      body {
        background-color: var(--bg);
        color: var(--primary);
        font-family: var(--font-main);
        margin: 0;
        padding: 0;
        padding-bottom: 110px;
        padding-top: env(safe-area-inset-top);
        -webkit-font-smoothing: antialiased;
      }

      h1,
      h2,
      h3 {
        font-family: var(--font-head);
        margin: 0;
      }
      h1 {
        font-size: 2rem;
        color: var(--primary);
        margin-bottom: 5px;
      }
      .subtitle {
        font-size: 0.85rem;
        color: #7f8c8d;
        font-weight: 700;
        letter-spacing: 1px;
        text-transform: uppercase;
      }

      .view {
        display: none;
        padding: 24px;
        animation: fadeIn 0.4s ease-out;
      }
      .view.active {
        display: block;
      }
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: translateY(10px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* LOGO */
      .logo-container {
        display: flex;
        justify-content: center;
        margin: 20px 0 30px 0;
      }
      .app-logo {
        width: 180px;
        height: auto;
      }

      /* CARDS */
      .card {
        background: var(--card-bg);
        border-radius: var(--radius);
        padding: 24px;
        margin-bottom: 20px;
        box-shadow: var(--shadow);
        border: 1px solid rgba(0, 0, 0, 0.02);
        position: relative;
      }
      .clickable-card {
        cursor: pointer;
        transition: transform 0.12s ease-out;
      }
      .clickable-card:active {
        transform: scale(0.98);
      }

      /* SYNDROME CARD */
      .syndrome-card {
        background: linear-gradient(135deg, #fff 0%, #fcfbf9 100%);
        border-left: 5px solid var(--accent);
      }

      /* ITINERARY LIST */
      .date-header {
        font-family: var(--font-head);
        font-size: 1.4rem;
        color: var(--accent);
        margin-top: 35px;
        margin-bottom: 15px;
        padding-bottom: 5px;
        border-bottom: 1px dashed #ccc;
      }

      .itinerary-item {
        display: flex;
        align-items: center;
        background: white;
        padding: 16px;
        border-radius: 20px;
        margin-bottom: 12px;
        box-shadow: var(--shadow);
      }
      .it-time {
        font-weight: 800;
        color: var(--accent);
        width: 50px;
        font-size: 0.85rem;
        text-align: center;
        line-height: 1.1;
      }
      .it-content {
        flex: 1;
        margin-left: 12px;
      }
      .it-title {
        font-weight: 700;
        font-size: 1rem;
        margin-bottom: 3px;
      }
      .it-desc {
        font-size: 0.8rem;
        color: #7f8c8d;
        overflow: hidden;
        display: -webkit-box;
        line-clamp: 2;
        -webkit-line-clamp: 2;
        -webkit-box-orient: vertical;
        line-height: 1.35;
      }
      .it-arrow {
        font-size: 1.2rem;
        color: #ddd;
      }

      /* PROTOCOL GRID */
      .grid-container {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }
      .proto-card {
        background: white;
        padding: 15px;
        border-radius: 20px;
        text-align: center;
        box-shadow: var(--shadow);
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: start;
        min-height: 150px;
        cursor: pointer;
      }
      .proto-icon {
        font-size: 2rem;
        margin-bottom: 8px;
      }
      .proto-title {
        font-weight: 800;
        font-size: 0.9rem;
        margin-bottom: 5px;
        color: var(--primary);
      }
      .proto-desc {
        font-size: 0.75rem;
        color: #666;
        line-height: 1.3;
      }

      /* MODAL STYLES */
      #detail-modal {
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        z-index: 2000;
        display: flex;
        align-items: flex-end;
        visibility: hidden;
        opacity: 0;
        transition: 0.3s;
      }
      #detail-modal.open {
        visibility: visible;
        opacity: 1;
      }
      .modal-backdrop-click {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
      }
      .modal-content {
        position: relative;
        background: #fafafa;
        width: 100%;
        height: 85vh;
        border-radius: 30px 30px 0 0;
        padding: 30px;
        overflow-y: auto;
        transform: translateY(100%);
        transition: transform 0.3s cubic-bezier(0.2, 1, 0.3, 1);
        box-shadow: 0 -10px 40px rgba(0, 0, 0, 0.1);
      }
      #detail-modal.open .modal-content {
        transform: translateY(0);
      }

      /* MINI TIMELINE IN MODAL */
      .mini-timeline {
        border-left: 2px solid #e0e0e0;
        margin-left: 10px;
        padding-left: 25px;
        margin-top: 20px;
        margin-bottom: 20px;
      }
      .timeline-step {
        position: relative;
        margin-bottom: 20px;
      }
      .timeline-step::before {
        content: "";
        position: absolute;
        left: -31px;
        top: 5px;
        width: 10px;
        height: 10px;
        background: var(--accent);
        border-radius: 50%;
        border: 2px solid #fafafa;
      }
      .step-title {
        font-weight: 700;
        font-size: 0.95rem;
        color: var(--primary);
      }
      .step-desc {
        font-size: 0.85rem;
        color: #666;
      }

      /* ROLE BOXES */
      .role-box {
        background: var(--soft-blue);
        padding: 15px;
        border-radius: 14px;
        margin-top: 15px;
        display: flex;
        gap: 12px;
        align-items: flex-start;
      }
      .role-box.dad {
        background: #fff8e1;
        color: #5d4037;
      }
      .role-box.mom {
        background: #e1f5fe;
        color: #01579b;
      }

      /* NAV */
      .glass-nav {
        position: fixed;
        bottom: 30px;
        left: 50%;
        transform: translateX(-50%);
        width: 85%;
        max-width: 380px;
        height: 65px;
        background: rgba(255, 255, 255, 0.95);
        backdrop-filter: blur(20px);
        border-radius: 50px;
        display: flex;
        justify-content: space-evenly;
        align-items: center;
        box-shadow: 0 15px 35px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        border: 1px solid rgba(255, 255, 255, 0.8);
      }
      .nav-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        opacity: 0.4;
        transition: 0.3s;
      }
      .nav-btn.active {
        opacity: 1;
        transform: scale(1.15);
      }
      .phrase-badge {
        background: var(--primary);
        color: #fff;
        padding: 8px 16px;
        border-radius: 20px;
        font-size: 0.85rem;
        box-shadow: 0 4px 10px rgba(44, 62, 80, 0.3);
        margin-bottom: 10px;
        display: inline-block;
      }

      #next-scroll {
        -webkit-overflow-scrolling: touch;
        scrollbar-width: none;
      }
      #next-scroll::-webkit-scrollbar {
        display: none;
      }
    </style>
  </head>
  <body>
    <!-- SETUP VIEW -->
    <div
      id="view-intro"
      class="view active"
      style="text-align: center; padding-top: 15vh"
    >
      <svg
        class="app-logo"
        viewBox="0 0 200 100"
        fill="none"
        xmlns="http://www.w3.org/2000/svg"
        style="margin-bottom: 20px"
      >
        <text
          x="100"
          y="40"
          font-family="'Playfair Display', serif"
          font-size="28"
          fill="#2C3E50"
          text-anchor="middle"
          font-weight="bold"
        >
          Seneda
        </text>
        <text
          x="100"
          y="70"
          font-family="'Nunito', sans-serif"
          font-size="20"
          fill="#C5A065"
          text-anchor="middle"
          letter-spacing="4"
        >
          PARIS
        </text>
        <path d="M100 75 L95 85 L105 85 Z" fill="#2C3E50" opacity="0.2" />
      </svg>

      <h1 style="font-size: 2.2rem">Bienvenue</h1>
      <p style="color: #666; max-width: 250px; margin: 0 auto">
        O guia de bolso para a nossa viagem.
      </p>

      <div style="margin-top: 60px">
        <p class="subtitle">QUEM √â VOC√ä?</p>
        <div
          style="
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 20px;
          "
        >
          <button
            onclick="setRole('dad')"
            style="
              background: white;
              border: none;
              padding: 25px;
              border-radius: 24px;
              box-shadow: var(--shadow);
            "
          >
            <div style="font-size: 3.5rem">üë¥</div>
            <div
              style="font-weight: bold; margin-top: 10px; color: var(--primary)"
            >
              Pai
            </div>
          </button>
          <button
            onclick="setRole('mom')"
            style="
              background: white;
              border: none;
              padding: 25px;
              border-radius: 24px;
              box-shadow: var(--shadow);
            "
          >
            <div style="font-size: 3.5rem">üë©</div>
            <div
              style="font-weight: bold; margin-top: 10px; color: var(--primary)"
            >
              M√£e
            </div>
          </button>
        </div>
        <p
          onclick="setRole('admin')"
          style="
            margin-top: 40px;
            opacity: 0.4;
            font-size: 0.8rem;
            letter-spacing: 1px;
          "
        >
          ADMIN ACCESS
        </p>
      </div>
    </div>

    <!-- APP CONTAINER -->
    <div id="app-container" style="display: none">
      <!-- 1. HOME TAB -->
      <div id="tab-home" class="view">
        <div class="logo-container">
          <svg
            width="140"
            height="60"
            viewBox="0 0 140 60"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <text
              x="70"
              y="30"
              font-family="'Playfair Display', serif"
              font-size="24"
              fill="#2C3E50"
              text-anchor="middle"
              font-weight="bold"
            >
              Seneda
            </text>
            <text
              x="70"
              y="50"
              font-family="'Nunito', sans-serif"
              font-size="14"
              fill="#C5A065"
              text-anchor="middle"
              letter-spacing="3"
            >
              PARIS
            </text>
          </svg>
        </div>

        <div style="text-align: center; margin-bottom: 25px">
          <div id="phrase-box" class="phrase-badge"></div>
          <h1 id="greeting" style="font-size: 1.8rem">...</h1>
          <p
            id="date-display"
            style="color: #999; font-size: 0.9rem; margin-top: 5px"
          >
            ...
          </p>
        </div>

        <div
          class="card syndrome-card"
          style="padding: 15px 20px; margin-bottom: 30px"
        >
          <h3
            style="color: var(--primary); font-size: 1.1rem; margin-bottom: 5px"
          >
            üß† Paris Tranquila
          </h3>
          <p
            style="
              font-size: 0.9rem;
              color: #555;
              line-height: 1.5;
              margin-bottom: 0;
            "
          >
            A "S√≠ndrome de Paris" n√£o √© sobre Paris ser ruim ‚Äî √© sobre
            <strong
              >choque de expectativa + cansa√ßo + excesso de est√≠mulo</strong
            >: frio, filas, metr√¥ cheio, barulho, pressa e a sensa√ß√£o de ‚Äún√£o
            estou entendendo nada‚Äù. Nosso plano √© simples:
            <strong>um foco por vez</strong>, pausas quentes frequentes, e
            liberdade total para mudar de ideia. Se ficar pesado, a gente faz o
            modo <strong>conforto</strong>: Uber, caf√©, sentar, banho quente, e
            volta pra base.
          </p>
        </div>

        <div
          class="card"
          style="
            background: #e1f5fe;
            border-left: 5px solid #03a9f4;
            padding: 15px 20px;
            margin-bottom: 30px;
          "
        >
          <h3 style="color: #01579b; font-size: 1.1rem; margin-bottom: 5px">
            üßä Alerta: Neve & Black Ice
          </h3>
          <p
            style="
              font-size: 0.9rem;
              color: #0277bd;
              line-height: 1.5;
              margin-bottom: 5px;
            "
          >
            Est√° nevando! Cuidado com o <strong>Gelo Preto</strong> (Verglas):
            uma camada de gelo transparente na calha que parece molhada, mas √©
            invis√≠vel e extremamente escorregadia.
          </p>
          <p
            style="
              font-size: 0.85rem;
              color: #01579b;
              line-height: 1.4;
              margin-bottom: 0;
              background: rgba(255, 255, 255, 0.5);
              padding: 10px;
              border-radius: 12px;
            "
          >
            üêß <strong>A regra do Pinguim:</strong> Para n√£o cair, caminhe como
            um pinguim! Mantenha o peso sobre a perna da frente, d√™ passos
            curtos e aponte os p√©s levemente para fora. E
            <strong>m√£os fora dos bolsos</strong> para manter o equil√≠brio!
          </p>
        </div>

        <p class="subtitle" style="margin-left: 5px; margin-bottom: 10px">
          AGORA
        </p>
        <div
          id="now-card-container"
          onclick="openDetail(currentEventId)"
          class="card clickable-card"
          style="
            background: var(--primary);
            color: white;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
          "
        >
          <!-- JS Injected -->
        </div>

        <p
          class="subtitle"
          style="margin-left: 5px; margin-bottom: 10px; margin-top: 30px"
        >
          A SEGUIR
        </p>
        <div
          id="next-scroll"
          style="
            display: flex;
            overflow-x: auto;
            gap: 15px;
            padding-bottom: 20px;
            padding-right: 20px;
          "
        >
          <!-- JS Injected -->
        </div>
      </div>

      <!-- 2. ITINERARY TAB -->
      <div id="tab-itinerary" class="view">
        <h1>Itiner√°rio</h1>
        <p class="subtitle">5 DIAS DE HIST√ìRIA</p>
        <div id="full-itinerary-list" style="padding-bottom: 80px">
          <!-- JS Injected -->
        </div>
      </div>

      <!-- 3. PROTOCOLS TAB -->
      <div id="tab-health" class="view">
        <h1>Protocolos</h1>
        <p class="subtitle">ESCUDO DE IMUNIDADE</p>

        <div
          class="card"
          style="background: var(--warning-bg); border: none; margin-top: 20px"
        >
          <h3 style="color: var(--warning-text); font-size: 1.1rem">
            ‚ö° Energia Vital
          </h3>
          <p style="margin-bottom: 0; color: #cc4400; font-size: 0.95rem">
            O corpo gasta muita energia para se aquecer. Economize essa energia
            para sua imunidade:
            <strong>Use Uber/T√°xi. N√£o ande no frio desnecessariamente.</strong>
          </p>
        </div>

        <div class="grid-container">
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('water')"
          >
            <div class="proto-icon">üíß</div>
            <div class="proto-title">Garrafa d'√Ågua</div>
            <div class="proto-desc">
              Tenha sempre uma na bolsa. O ar frio desidrata sem voc√™ perceber.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('sanitizer')"
          >
            <div class="proto-icon">üß¥</div>
            <div class="proto-title">√Ålcool Gel</div>
            <div class="proto-desc">
              M√£os limpas no metr√¥ e em museus. Pequeno, mas poderoso.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('timing')"
          >
            <div class="proto-icon">üï∞Ô∏è</div>
            <div class="proto-title">Hor√°rios Alternativos</div>
            <div class="proto-desc">
              Almo√ßar cedo (12h) ou tarde (14h) para evitar restaurantes
              lotados.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('rest')"
          >
            <div class="proto-icon">üõãÔ∏è</div>
            <div class="proto-title">Descanso</div>
            <div class="proto-desc">
              Fazer pausas estrat√©gicas em bancos ou caf√©s a cada hora.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('warmers')"
          >
            <div class="proto-icon">üî•</div>
            <div class="proto-title">Aquecedor de M√£os</div>
            <div class="proto-desc">
              Pacotinhos t√©rmicos (hand warmers). Ajuda muito no frio e
              economiza energia.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('mask')"
          >
            <div class="proto-icon">üò∑</div>
            <div class="proto-title">M√°scara PFF2</div>
            <div class="proto-desc">Metr√¥, T√°xi e Museus. Sem exce√ß√£o.</div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('cowl')"
          >
            <div class="proto-icon">üß£</div>
            <div class="proto-title">Balaclava / Cachecol (Cowl)</div>
            <div class="proto-desc">
              Cubra nariz e boca na rua. Crie uma bolsa de ar quente.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('nasal')"
          >
            <div class="proto-icon">üåä</div>
            <div class="proto-title">Spray Nasal (Soro)</div>
            <div class="proto-desc">
              Nas transi√ß√µes (rua ‚áÑ metr√¥ ‚áÑ quarto). Ajuda a manter o nariz
              √∫mido.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('room')"
          >
            <div class="proto-icon">üå°Ô∏è</div>
            <div class="proto-title">Quarto: 20¬∞C + Umidade</div>
            <div class="proto-desc">
              Evite ar seco demais. Conforto t√©rmico sem ‚Äútorrar‚Äù o nariz.
            </div>
          </div>
          <div
            class="proto-card clickable-card"
            onclick="openProtocolDetail('tea')"
          >
            <div class="proto-icon">üçµ</div>
            <div class="proto-title">Gengibre & Mel</div>
            <div class="proto-desc">Ch√° quente para a garganta.</div>
          </div>
        </div>
      </div>

      <!-- 4. MAPS TAB -->
      <div id="tab-maps" class="view">
        <h1>Mapas</h1>
        <p class="subtitle">LOCALIZA√á√ÉO</p>

        <a
          href="https://maps.apple.com/?q=8+rue+Caillaux,75013,Paris"
          class="card clickable-card"
          style="
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            gap: 15px;
          "
        >
          <div style="font-size: 2rem">üè®</div>
          <div>
            <h3 style="font-size: 1.1rem; margin-bottom: 5px">Hotel Novex</h3>
            <div style="color: #666; font-size: 0.9rem">
              8 rue Caillaux, 75013
            </div>
          </div>
        </a>

        <a
          href="https://maps.apple.com/?q=82+Rue+Baudricourt,75013+Paris"
          class="card clickable-card"
          style="
            text-decoration: none;
            color: inherit;
            display: flex;
            align-items: center;
            gap: 15px;
          "
        >
          <div style="font-size: 2rem">üè†</div>
          <div>
            <h3 style="font-size: 1.1rem; margin-bottom: 5px">
              Casa do Isaque
            </h3>
            <div style="color: #666; font-size: 0.9rem">
              82 Rue Baudricourt, 75013
            </div>
          </div>
        </a>

        <div class="card" style="margin-top: 40px; text-align: center">
          <p style="margin-bottom: 10px">
            Logado como: <strong id="user-display"></strong>
          </p>
          <button
            onclick="resetApp()"
            style="
              background: #f1f2f6;
              border: none;
              padding: 12px 30px;
              border-radius: 12px;
              color: #ff4757;
              font-weight: bold;
            "
          >
            Sair / Resetar
          </button>
        </div>
      </div>

      <!-- NAV -->
      <nav class="glass-nav">
        <button class="nav-btn active" onclick="nav('home')">üè†</button>
        <button class="nav-btn" onclick="nav('itinerary')">üìÖ</button>
        <button class="nav-btn" onclick="nav('health')">‚ù§Ô∏è</button>
        <button class="nav-btn" onclick="nav('maps')">üìç</button>
      </nav>
    </div>

    <!-- DETAIL MODAL -->
    <div id="detail-modal">
      <div class="modal-backdrop-click" onclick="closeDetail()"></div>
      <div class="modal-content">
        <div
          style="
            width: 40px;
            height: 5px;
            background: #eee;
            border-radius: 5px;
            margin: 0 auto 20px auto;
          "
        ></div>
        <div id="modal-body"></div>
      </div>
    </div>

    <script>
      // --- DATA ---
      const phrases = {
        6: { fr: "Bonsoir", pt: "Boa noite", phon: "bon-suar" },
        7: {
          fr: "Je voudrais un caf√©",
          pt: "Eu queria um caf√©",
          phon: "juh vu-dr√© un ca-f√©",
        },
        8: { fr: "S'il vous pla√Æt", pt: "Por favor", phon: "sil vu pl√©" },
        9: {
          fr: "L'addition, s'il vous pla√Æt",
          pt: "A conta, por favor",
          phon: "la-di-ssion",
        },
        10: { fr: "Au revoir", pt: "At√© logo", phon: "o re-vuar" },
      };

      const itinerary = [
        // TER√áA 6
        {
          id: 1,
          start: "2026-01-06T12:00",
          end: "2026-01-06T23:00",
          title: "Viagem",
          duration: "11h",
          desc: "Voo rumo √† Europa.",
          icon: "‚úàÔ∏è",
          mom: "Hidrata√ß√£o constante no avi√£o.",
          dad: "Tente cochilar. O fuso √© de +4 horas.",
          steps: [
            { t: "Voo", d: "Beber √°gua a cada hora" },
            { t: "Pouso", d: "Apertar o cinto" },
          ],
        },
        {
          id: 2,
          start: "2026-01-06T23:45",
          end: "2026-01-07T01:30",
          title: "Chegada em Orly",
          duration: "1h 45m",
          desc: "Desembarque e transporte.",
          icon: "üõ¨",
          mom: "Cachecol no rosto IMEDIATAMENTE ao sair.",
          dad: "Orly √© um peda√ßo bem ‚Äòcl√°ssico‚Äô da hist√≥ria da avia√ß√£o em Paris.<br><br><strong>Por que ele importa:</strong> antes do Charles de Gaulle virar o grande hub internacional, Orly foi o aeroporto mais ‚Äòglamouroso‚Äô e conhecido da cidade. A cultura de avia√ß√£o era t√£o forte que, em d√©cadas passadas, gente ia aos terra√ßos s√≥ para assistir pousos e decolagens.<br><br><strong>Curiosidades √∫teis agora:</strong><ul><li>Depois de um voo longo, o corpo est√° mais sens√≠vel a frio + ar seco. A primeira rajada gelada na sa√≠da √© onde a garganta come√ßa a reclamar.</li><li>O melhor ‚Äúhack‚Äù p√≥s-voo n√£o √© correr: √© fazer tudo no modo lento, com casaco e respira√ß√£o protegida.</li><li>Se bater confus√£o, a regra √© simples: eu coordeno Uber/sa√≠da e voc√™s s√≥ seguem as placas.</li></ul>",
          steps: [
            { t: "Desembarque", d: "Seguir placas 'Sortie'" },
            { t: "Malas", d: "Esteira 4 ou 5" },
            { t: "Uber", d: "Eu estarei coordenando" },
            { t: "Hotel", d: "Check-in r√°pido" },
          ],
        },

        // QUARTA 7
        {
          id: 3,
          start: "2026-01-07T01:30",
          end: "2026-01-07T10:00",
          title: "Recupera√ß√£o",
          duration: "8h 30m",
          desc: "Dormir at√© tarde.",
          icon: "üí§",
          mom: "Tigela de √°gua no quarto para umidade.",
          dad: "Primeiro dia completo p√≥s-voo √© o mais perigoso para ‚Äòmodo zumbi‚Äô: o corpo est√° acordado no fuso errado. A regra √©: caf√© com calma, luz do dia (um pouco), e sem tentar ‚Äòaproveitar tudo‚Äô.",
        },
        {
          id: 4,
          start: "2026-01-07T10:00",
          end: "2026-01-07T12:00",
          title: "Padaria & Caf√©",
          duration: "2h",
          desc: "Croissant na vizinhan√ßa.",
          icon: "ü•ê",
          dad: "O caf√© da manh√£ parisiense √© um ritual ‚Äî e padaria em Paris √© quase um servi√ßo p√∫blico.<br><br><strong>Sobre a ‚ÄòTradition‚Äô:</strong> quando voc√™ pede uma <em>baguette tradition</em>, em geral voc√™ est√° sinalizando: ‚Äúquero a vers√£o mais artesanal‚Äù, feita no dia e sem atalhos industriais. Ela costuma ter casca mais crocante e miolo mais irregular (bom sinal).<br><br><strong>Mini-guia do balc√£o:</strong><ul><li><em>Bonjour</em> primeiro (sempre).</li><li>Se quiser algo cl√°ssico: <em>un croissant</em> + <em>un caf√©</em>.</li><li>Se quiser p√£o: <em>une baguette tradition</em> (ou s√≥ ‚Äúune tradition‚Äù).</li></ul><strong>Trivia Paris:</strong> a cidade √© cheia de micro-h√°bitos: comprar p√£o ‚Äúna ida‚Äù e n√£o ‚Äúna volta‚Äù (porque esfria), e sempre comer sentado quando d√° ‚Äî o descanso faz parte da viagem.",
          steps: [
            { t: "Boulangerie", d: "Escolher croissants" },
            { t: "Caf√©", d: "Sentar e comer devagar" },
          ],
        },
        {
          id: 5,
          start: "2026-01-07T12:00",
          end: "2026-01-07T14:30",
          title: "Quartier Latin",
          duration: "2h 30m",
          desc: "Pante√£o & Sorbonne.",
          icon: "üèõÔ∏è",
          dad: "O Quartier Latin √© onde Paris fica ‚Äòcerebral‚Äô.<br><br><strong>Por que chama ‚ÄòLatino‚Äô:</strong> durante s√©culos, o latim foi a l√≠ngua acad√™mica. A regi√£o virou sin√¥nimo de estudantes, livrarias, debates e caf√©s onde as pessoas ficam horas conversando (o famoso ‚Äòsentar e pensar‚Äô parisiense).<br><br><strong>O que voc√™ vai sentir andando ali:</strong><ul><li>Ruas com cara de cidade antiga, mas com energia de campus.</li><li>Um ‚Äúbarulho‚Äù diferente: mais conversa, menos correria de turismo.</li><li>Muita vitrine de livros ‚Äî Paris tem orgulho de ser uma cidade de leitura.</li></ul><strong>Trivia hist√≥rica (sem peso):</strong><ul><li>O Panth√©on virou um grande s√≠mbolo de ‚Äúmem√≥ria nacional‚Äù: uma ideia de Fran√ßa como projeto cultural.</li><li>A Sorbonne √© uma refer√™ncia de ensino h√° muitos s√©culos ‚Äî por isso esse bairro tem fama de ser a ‚Äòmente‚Äô da cidade.</li><li>O Jardin du Luxembourg √© o lugar perfeito para o modo Paris real: sentar, olhar o movimento, e n√£o fazer nada por 15 minutos.</li></ul>",
          mom: "Caminhada lenta. Parar nos bancos do jardim.",
          steps: [
            {
              t: "Panth√©on",
              d: "Onde descansam os her√≥is da Fran√ßa (Voltaire, Rousseau).",
            },
            {
              t: "La Sorbonne",
              d: "Fundada em 1257 por Robert de Sorbon para estudantes pobres. Uma das primeiras do mundo.",
            },
            {
              t: "Jardin du Luxembourg",
              d: "Criado em 1612 pela rainha Maria de M√©dici. Vamos sentar nas cadeiras verdes famosas.",
            },
          ],
        },
        {
          id: 6,
          start: "2026-01-07T14:30",
          end: "2026-01-07T18:00",
          title: "Climb Up (Descanso + Co-work)",
          duration: "3h 30m",
          desc: "Academia de escalada: descanso no quentinho e co-work.",
          icon: "üßó",
          mom: "Lugar quentinho, banheiro, √°gua. Sentar bastante e n√£o ficar no vento.",
          dad: "Esse bloco √© o nosso ‚Äòreset‚Äô do dia.<br><br><strong>Por que academia √© perfeita para descansar:</strong><ul><li>Temperatura est√°vel (sem vento)</li><li>Banheiro f√°cil</li><li>√Ågua, sentar, e um lugar seguro para ‚Äúesperar o corpo voltar‚Äù</li></ul><strong>O que √© bouldering:</strong> escalada em paredes mais baixas com colch√µes grandes. D√° para participar ou s√≥ assistir ‚Äî ningu√©m precisa ‚Äúfazer esporte‚Äù.<br><br><strong>Porte d‚ÄôItalie:</strong> o nome vem da ideia de ‚Äúporta‚Äù/entrada de Paris. Hoje √© um entroncamento de transporte (metr√¥/tram/avenidas), t√≠pico daqueles lugares onde Paris encontra o anel vi√°rio.",
          steps: [
            { t: "Chegar", d: "Uber/T√°xi se estiver frio" },
            { t: "Co-work", d: "Tomar um ch√°/√°gua, sentar e trabalhar em paz" },
            { t: "Pausa", d: "Alongar, banheiro, recuperar energia" },
          ],
        },
        {
          id: 7,
          start: "2026-01-07T18:30",
          end: "2026-01-07T19:30",
          title: "Ch√° no Isaque",
          duration: "1h",
          desc: "Volta pra base: ch√°, aquecer, e recarregar.",
          icon: "üçµ",
          dad: "Ritual de ‚Äòdescompress√£o‚Äô: depois de rua/museu/metro, chegar em casa e ficar 40‚Äì60min em sil√™ncio muda o resto da noite.",
          steps: [
            { t: "Chegar", d: "Tirar sapato/casaco e aquecer" },
            { t: "Ch√°", d: "Gengibre + mel (opcional)" },
          ],
        },
        {
          id: 8,
          start: "2026-01-07T20:00",
          end: "2026-01-07T22:00",
          title: "Jantar Vietnamita (Pho)",
          duration: "2h",
          desc: "Restaurante asi√°tico no bairro: pho quentinho.",
          icon: "üçú",
          mom: "Escolher algo quente. Se o frio apertar, vamos de Uber e sentamos perto da porta menos poss√≠vel.",
          dad: "Jantar de conforto do jeito certo.<br><br><strong>Trivia do 13¬∫:</strong> esta regi√£o √© conhecida por uma grande concentra√ß√£o de mercados e restaurantes asi√°ticos. N√£o √© ‚Äúum cantinho tur√≠stico‚Äù: √© vida de bairro mesmo ‚Äî e isso deixa a noite mais tranquila.<br><br><strong>Por que pho √© perfeito no inverno:</strong><ul><li>Caldo quente ajuda a aquecer por dentro</li><li>√â hidratante (bom para garganta)</li><li>Voc√™ consegue comer devagar e sair satisfeito sem ficar ‚Äúpesado‚Äù</li></ul><strong>Curiosidade cultural:</strong> em muitas culin√°rias asi√°ticas, sopa n√£o √© ‚Äúentrada‚Äù: √© refei√ß√£o completa, pensada para reequilibrar o corpo no frio.",
          steps: [
            { t: "Chegar", d: "Mesa tranquila e sem pressa" },
            { t: "Pho", d: "Caldo quente + hidrata√ß√£o + energia" },
            { t: "Volta", d: "Caminhada leve se estiver ok; sen√£o Uber" },
          ],
        },

        // QUINTA 8
        {
          id: 9,
          start: "2026-01-08T10:30",
          end: "2026-01-08T13:00",
          title: "Le Bon March√©",
          duration: "2h 30m",
          desc: "O Shopping mais chique.",
          icon: "üõçÔ∏è",
          dad: "O Le Bon March√© √© mais do que ‚Äòloja chique‚Äô: √© um cap√≠tulo importante da hist√≥ria do consumo moderno.<br><br><strong>O que ele ajudou a popularizar:</strong><ul><li>Pre√ßos fixos (antes era comum negociar)</li><li>Entrada livre e olhar sem obriga√ß√£o de comprar</li><li>Pol√≠tica de trocas e foco em atendimento</li></ul><strong>Por que isso virou ‚ÄúParis‚Äù:</strong> a cidade sempre vendeu a ideia de eleg√¢ncia como experi√™ncia ‚Äî vitrines, luz, escadas, decora√ß√£o. Mesmo sem comprar nada caro, √© divertido ver como a cidade encena o ‚Äúbom gosto‚Äù.<br><br><strong>Dica de energia:</strong> aqui √© passeio de olhos. Se cansar, a gente transforma em pausa: sentar, banheiro, √°gua.",
          steps: [
            { t: "Entrada", d: "Ver as escadas rolantes centrais" },
            { t: "Passeio", d: "Ver vitrines (sem comprar nada caro!)" },
          ],
        },
        {
          id: 10,
          start: "2026-01-08T13:00",
          end: "2026-01-08T14:30",
          title: "Grande √âpicerie",
          duration: "1h 30m",
          desc: "Gastronomia fina.",
          icon: "üç∞",
          mom: "Vamos comer um bolo, mas cuidado com o a√ß√∫car!",
          dad: "Isso aqui √© o parque de divers√µes de quem gosta de comida.<br><br><strong>Como olhar sem cansar:</strong><ul><li>Escolhe 1 setor para focar (queijos OU p√£es OU doces)</li><li>Faz o passeio lento e para quando achar algo bonito</li><li>Se o lugar estiver cheio, viramos o jogo: s√≥ vitrine + foto + pausa</li></ul><strong>Trivia francesa:</strong> a Fran√ßa √© obcecada por origem/terroir (regi√£o, clima, m√©todo). Queijo e p√£o n√£o s√£o ‚Äúum produto‚Äù: s√£o identidade regional.<br><br><strong>Degusta√ß√£o inteligente:</strong> um docinho + caf√© pode ser o suficiente para ter a sensa√ß√£o de ‚Äúexperi√™ncia parisiense‚Äù sem exagerar.",
          steps: [
            { t: "Vitrines", d: "Ver os queijos e p√£es incr√≠veis" },
            { t: "Bolo", d: "Caf√© e doce na pra√ßa central" },
          ],
        },
        {
          id: 11,
          start: "2026-01-08T15:00",
          end: "2026-01-08T18:00",
          title: "Descanso Tarde",
          duration: "3h",
          desc: "Hotel.",
          icon: "üí§",
          dad: "Paris cansa mais do que parece: ru√≠do, decis√µes, fila, mudan√ßa de temperatura. Essa ‚Äòjanela‚Äô √© o que faz a noite ser boa em vez de um sofrimento.",
        },
        {
          id: 12,
          start: "2026-01-08T19:00",
          end: "2026-01-08T21:00",
          title: "Sopa no Isaque",
          duration: "2h",
          desc: "Jantar caseiro.",
          icon: "üç≤",
          dad: "Sopa quentinha para imunidade.",
        },

        // SEXTA 9
        {
          id: 13,
          start: "2026-01-09T09:30",
          end: "2026-01-09T11:30",
          title: "O Louvre (Externo)",
          duration: "2h",
          desc: "Pir√¢mide & Tuileries.",
          icon: "üñºÔ∏è",
          dad: "O Louvre √© o exemplo perfeito de como Paris recicla hist√≥ria: fortaleza ‚Üí pal√°cio ‚Üí museu.<br><br><strong>Linha do tempo (bem resumida):</strong><ul><li>Come√ßou como fortifica√ß√£o medieval para defender a cidade</li><li>Virou resid√™ncia/pal√°cio em fases diferentes da monarquia</li><li>Com a Revolu√ß√£o Francesa, o museu vira s√≠mbolo de ‚Äúarte para o p√∫blico‚Äù</li></ul><strong>Por que ver por fora j√° vale:</strong><ul><li>A arquitetura mostra s√©culos diferentes encostados (√© um ‚Äòmuseu de pedra‚Äô)</li><li>A Pir√¢mide de vidro √© um choque proposital: moderno vs antigo</li><li>As Tuileries s√£o a pausa real: jardim amplo, bancos, e c√©u aberto</li></ul><strong>Trivia Paris:</strong> a cidade gosta de eixos e perspectivas longas ‚Äî daqui d√° para sentir o desenho urbano ‚Äúem linha reta‚Äù que aparece em v√°rios cart√µes-postais.",
          steps: [
            {
              t: "Arc du Carrousel",
              d: "O arco menor, constru√≠do por Napole√£o",
            },
            {
              t: "Pir√¢mide",
              d: "De vidro, moderna (1989), contraste com o antigo",
            },
            { t: "Jardin des Tuileries", d: "Jardim real para caminhada leve" },
          ],
        },
        {
          id: 14,
          start: "2026-01-09T12:00",
          end: "2026-01-09T14:00",
          title: "Surpresa",
          duration: "2h",
          desc: "Almo√ßo especial.",
          icon: "üéÅ",
          mom: "Prepare o est√¥mago para algo gostoso.",
          dad: "Dica de sobreviv√™ncia gastron√¥mica: em Paris, almo√ßo costuma ser mais ‚Äòcertinho‚Äô (12h‚Äì14h). Fora desse hor√°rio, alguns lugares lotam ou fecham a cozinha.",
        },
        {
          id: 15,
          start: "2026-01-09T14:30",
          end: "2026-01-09T16:00",
          title: "Torre Eiffel",
          duration: "1h 30m",
          desc: "Vista do Trocadero.",
          icon: "üóº",
          dad: "A Torre Eiffel √© o maior ‚Äúplot twist‚Äù da cidade.<br><br><strong>O que muita gente n√£o sabe:</strong><ul><li>No come√ßo, muita gente odiou (achavam feia e industrial demais)</li><li>Ela nasceu como pe√ßa de demonstra√ß√£o de engenharia na Feira Mundial</li><li>Era para ser tempor√°ria ‚Äî mas a utilidade como comunica√ß√£o/antena ajudou a manter</li></ul><strong>Por que o Trocad√©ro √© perfeito:</strong><ul><li>Voc√™ v√™ a torre inteira sem esfor√ßo de entrar em filas</li><li>√â o lugar cl√°ssico da foto, mas tamb√©m d√° para s√≥ sentar e olhar</li><li>A gente controla o tempo: 15‚Äì20min j√° resolve se estiver frio</li></ul><strong>Trivia de Paris:</strong> a cidade √© cheia de monumentos que viraram ‚Äús√≠mbolo‚Äù muito depois de prontos. Paris adora brigar com o novo e depois abra√ßar.",
          steps: [
            { t: "Trocadero", d: "Melhor vista panor√¢mica (sem degraus)" },
            { t: "Fotos", d: "Hora da foto cl√°ssica" },
          ],
        },
        {
          id: 16,
          start: "2026-01-09T16:30",
          end: "2026-01-09T18:00",
          title: "Universidade",
          duration: "1h 30m",
          desc: "Onde minha namorada estuda.",
          icon: "üéì",
          dad: "Paris √© uma cidade universit√°ria desde a Idade M√©dia. A cultura de bibliotecas, caf√©s de estudo e campi espalhados √© parte do ‚ÄòDNA‚Äô da cidade.",
        },
        {
          id: 17,
          start: "2026-01-09T19:00",
          end: "2026-01-09T22:00",
          title: "Jantar de Despedida",
          duration: "3h",
          desc: "Au revoir!",
          icon: "üç∑",
          dad: "√öltima noite √© para o que Paris faz melhor: sentar, conversar, comer devagar. Sem correria e sem agenda depois.",
        },

        // S√ÅBADO 10
        {
          id: 18,
          start: "2026-01-10T10:00",
          end: "2026-01-10T11:30",
          title: "Checkout",
          duration: "1h 30m",
          desc: "Malas prontas.",
          icon: "üß≥",
          mom: "Conferir rem√©dios, passaportes e carregadores.",
          dad: "Checklist final salva a viagem: documento + rem√©dio + carregador + casaco na m√£o (n√£o na mala). E sempre sair com folga: aeroporto √© a hora errada de correr.",
        },
        {
          id: 19,
          start: "2026-01-10T12:00",
          end: "2026-01-10T13:00",
          title: "Ida para Orly",
          duration: "1h",
          desc: "Uber/Taxi.",
          icon: "üöï",
          dad: "Orly fica ao sul de Paris. Indo cedo, a gente evita estresse de tr√¢nsito e d√° tempo de resolver fila/bagagem sem pressa.",
        },
        {
          id: 20,
          start: "2026-01-10T15:40",
          end: "2026-01-10T20:00",
          title: "Voo de Volta",
          duration: "11h",
          desc: "Boa viagem!",
          icon: "üõ´",
          dad: "No voo de volta: hidrata√ß√£o + levantar 1‚Äì2 vezes. E se der, tentar alinhar o sono com o hor√°rio do Brasil para sofrer menos no dia seguinte.",
        },
      ];

      let userRole = localStorage.getItem("role");
      let currentEventId = null;

      const protocols = {
        water: {
          icon: "üíß",
          title: "Garrafa d'√Ågua",
          summary:
            "O frio e o ar seco aumentam a perda de √°gua ‚Äî inclusive pela respira√ß√£o.",
          science:
            "Quando o ar est√° frio e seco, voc√™ perde mais √°gua ao umidificar o ar que entra e ao respirar mais r√°pido andando. Al√©m disso, mucosas (nariz/garganta) secas perdem efici√™ncia na limpeza natural (muco + c√≠lios), o que aumenta irrita√ß√£o e deixa a garganta mais sens√≠vel.",
          how: "Pequenos goles ao longo do dia > beber muito de uma vez. O objetivo √© manter garganta e mucosas confort√°veis.",
        },
        sanitizer: {
          icon: "üß¥",
          title: "√Ålcool Gel",
          summary:
            "Reduz a transfer√™ncia de micr√≥bios das superf√≠cies para olhos/nariz/boca.",
          science:
            "Em locais cheios, muita transmiss√£o acontece pelas m√£os: voc√™ encosta em corrim√£o/ma√ßaneta/celular e depois toca no rosto. Solu√ß√µes alco√≥licas (idealmente ~60% ou mais) desorganizam a camada lip√≠dica de muitos v√≠rus e reduzem a carga microbiana nas m√£os.",
          how: "Usar ap√≥s metr√¥/t√°xi/museu e antes de comer. Evitar passar no rosto/olhos. Se ressecar, usar hidratante √† noite.",
        },
        timing: {
          icon: "üï∞Ô∏è",
          title: "Hor√°rios Alternativos",
          summary:
            "Menos fila = menos estresse, menos exposi√ß√£o e mais conforto t√©rmico.",
          science:
            "Crowd-control √© sa√∫de: menos aglomera√ß√£o reduz a chance de pegar infec√ß√µes respirat√≥rias e diminui o estresse (que piora sono e recupera√ß√£o). Tamb√©m reduz tempo parado no frio ‚Äî parado, o corpo esfria mais r√°pido.",
          how: "Almo√ßar 12h ou 14h e escolher lugares com mesa tranquila. Se lotar, trocamos de plano sem culpa.",
        },
        rest: {
          icon: "üõãÔ∏è",
          title: "Descanso",
          summary:
            "Pausas curtas diminuem sobrecarga e ajudam imunidade/recupera√ß√£o.",
          science:
            "Cansa√ßo aumenta percep√ß√£o de dor, irrita√ß√£o, e piora toler√¢ncia ao frio. Descanso e sono ajudam a regular horm√¥nios de estresse e sustentam a resposta imune. Em viagem, a sobrecarga sensorial (barulho, decis√µes, l√≠ngua) tamb√©m pesa.",
          how: "Pausa a cada ~60‚Äì90 min: sentar 10‚Äì15 min em local quente. √Ågua + banheiro + respirar devagar.",
        },
        warmers: {
          icon: "üî•",
          title: "Aquecedor de M√£os",
          summary:
            "Manter extremidades aquecidas reduz desconforto e economiza energia.",
          science:
            "No frio, o corpo faz vasoconstri√ß√£o (reduz fluxo nas m√£os/p√©s) para proteger √≥rg√£os centrais. Isso deixa dedos doloridos e aumenta a sensa√ß√£o de ‚Äòfrio insuport√°vel‚Äô. Aquecedores externos diminuem esse estresse t√©rmico.",
          how: "Usar no bolso/luva. N√£o encostar direto na pele por muito tempo (pode irritar/queimar).",
        },
        mask: {
          icon: "üò∑",
          title: "M√°scara PFF2",
          summary:
            "Filtra aeross√≥is e reduz risco em ambientes fechados e cheios.",
          science:
            "Em metr√¥, t√°xi e museus, o principal risco s√£o part√≠culas/aeross√≥is respirat√≥rios em locais fechados. Uma PFF2 bem ajustada reduz o que voc√™ inala e tamb√©m o que voc√™ exala, diminuindo transmiss√£o.",
          how: "Ajuste no nariz e bochechas. Se estiver √∫mida, trocar. Guardar em saco limpo.",
        },
        cowl: {
          icon: "üß£",
          title: "Balaclava / Cachecol (Cowl)",
          summary:
            "Aquece e umidifica o ar inspirado, protegendo garganta e vias a√©reas.",
          science:
            "Respirar ar frio e seco irrita a mucosa do nariz e garganta. Cobrir nariz e boca cria uma ‚Äòmicroc√¢mara‚Äô que ret√©m calor e umidade da expira√ß√£o ‚Äî o ar que entra fica menos agressivo.",
          how: "Na rua, usar cobrindo nariz e boca. Em locais internos, abaixar para conforto.",
        },
        nasal: {
          icon: "üåä",
          title: "Spray Nasal (Soro)",
          summary:
            "Especialmente nos momentos de transi√ß√£o (frio ‚Üí quente ‚Üí seco): protege a mucosa.",
          science:
            "O nariz √© um filtro: ele aquece, umidifica e captura part√≠culas. Quando a mucosa resseca (ar frio/vento + aquecimento interno), ela perde efici√™ncia e fica mais irritada, o que facilita dor de garganta e sangramento nasal em algumas pessoas. Spray de soro fisiol√≥gico ajuda a reidratar a mucosa e a manter o muco funcional.",
          how: "Usar soro isot√¥nico (n√£o medicamentoso) 1‚Äì3x/dia, principalmente ap√≥s metr√¥/rua e antes de dormir. Se usar spray medicamentoso, evitar uso prolongado sem orienta√ß√£o.",
        },
        room: {
          icon: "üå°Ô∏è",
          title: "Quarto: 20¬∞C + Umidade",
          summary:
            "O aquecimento pode secar o ar. O alvo √© conforto: nem frio demais, nem ‚Äòforno seco‚Äô.",
          science:
            "Ar muito seco resseca nariz e garganta e piora tosse/irrita√ß√£o. Aquecimento forte reduz umidade relativa. Uma faixa confort√°vel para muita gente √© manter o quarto por volta de ~19‚Äì21¬∞C e uma umidade moderada (nem seco demais, nem √∫mido demais).",
          how: "Se estiver seco: reduzir aquecimento, deixar um copo de √°gua/toalha √∫mida no quarto (solu√ß√£o simples), ou umidificador (se tiver). Ventilar um pouco para n√£o ficar abafado.",
        },
        tea: {
          icon: "üçµ",
          title: "Gengibre & Mel",
          summary:
            "Conforto de garganta: calor + hidrata√ß√£o + efeito calmante.",
          science:
            "L√≠quidos quentes aliviam sensa√ß√£o de irrita√ß√£o e ajudam hidrata√ß√£o local. Mel pode reduzir tosse por efeito demulcente (uma ‚Äòcamada‚Äô calmante) e gengibre √© associado a sensa√ß√£o de aquecimento e al√≠vio de n√°usea em algumas pessoas.",
          how: "Ch√° quente (n√£o fervendo) e mel a gosto. Se houver restri√ß√£o de a√ß√∫car, ajustar.",
        },
      };

      function init() {
        if (userRole) {
          document.getElementById("view-intro").classList.remove("active");
          document.getElementById("app-container").style.display = "block";
          document.getElementById("tab-home").classList.add("active");
          document.getElementById("user-display").innerText =
            userRole.toUpperCase();

          updateTimeLogic();
          renderItinerary();
          setInterval(updateTimeLogic, 60000);
        }
      }

      function setRole(role) {
        userRole = role;
        localStorage.setItem("role", role);
        init();
      }

      function updateTimeLogic() {
        const now = new Date();
        const day = now.getDate();
        const phrase = phrases[day] || phrases["6"];
        document.getElementById(
          "phrase-box"
        ).innerHTML = `${phrase.fr} <span style="opacity:0.7; font-weight:400">(${phrase.phon})</span>`;

        const h = now.getHours();
        let g = h >= 18 ? "Bonsoir" : "Bonjour";
        document.getElementById("greeting").innerText = `${g}, Fam√≠lia!`;

        const dateStr = now.toLocaleDateString("pt-BR", {
          weekday: "long",
          day: "numeric",
          month: "long",
        });
        document.getElementById("date-display").innerText =
          dateStr.charAt(0).toUpperCase() + dateStr.slice(1);

        let current = null;
        let next = [];

        for (let item of itinerary) {
          const s = new Date(item.start);
          const e = new Date(item.end);
          if (now >= s && now <= e) current = item;
          else if (now < s) next.push(item);
        }

        if (!current && next.length > 0) {
          current = {
            title: "Tempo Livre",
            desc: "Descanso estrat√©gico.",
            icon: "‚ú®",
            dummy: true,
          };
        } else if (!current && next.length === 0) {
          current = {
            title: "Viagem Conclu√≠da",
            desc: "Espero que tenham amado!",
            icon: "‚ù§Ô∏è",
            dummy: true,
          };
        }

        currentEventId = current.dummy ? null : current.id;

        const nowCard = document.getElementById("now-card-container");
        nowCard.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:flex-start;">
                    <div>
                        <div style="font-size:2.5rem; margin-bottom:5px;">${
                          current.icon
                        }</div>
                        <h2 style="color:white; font-size:1.6rem; margin-bottom:5px;">${
                          current.title
                        }</h2>
                        <p style="opacity:0.9; margin:0; font-size:0.95rem;">${
                          current.desc
                        }</p>
                    </div>
                    ${
                      !current.dummy
                        ? '<div style="background:rgba(255,255,255,0.2); width:30px; height:30px; border-radius:50%; display:flex; align-items:center; justify-content:center;">‚Ä∫</div>'
                        : ""
                    }
                </div>`;

        if (current.dummy) nowCard.classList.remove("clickable-card");
        else nowCard.classList.add("clickable-card");

        const nextCont = document.getElementById("next-scroll");
        nextCont.innerHTML = "";
        next.slice(0, 5).forEach((i) => {
          const t = new Date(i.start).toLocaleTimeString("pt-BR", {
            hour: "2-digit",
            minute: "2-digit",
          });
          nextCont.innerHTML += `
                    <div onclick="openDetail(${i.id})" class="card clickable-card" style="min-width: 150px; margin-bottom:0; padding: 15px; display:flex; flex-direction:column; justify-content:center;">
                        <div style="font-size:1.8rem; margin-bottom:5px;">${i.icon}</div>
                        <div style="font-weight:bold; font-size:0.8rem; color:var(--accent);">${t}</div>
                        <div style="font-weight:700; font-size:0.95rem; line-height:1.2;">${i.title}</div>
                    </div>`;
        });
      }

      function renderItinerary() {
        const list = document.getElementById("full-itinerary-list");
        list.innerHTML = "";
        let lastDate = "";

        itinerary.forEach((i) => {
          const d = new Date(i.start);
          const ds = d.toLocaleDateString("pt-BR", {
            weekday: "short",
            day: "numeric",
            month: "short",
          });
          const ts = d.toLocaleTimeString("pt-BR", {
            hour: "2-digit",
            minute: "2-digit",
          });

          if (ds !== lastDate) {
            list.innerHTML += `<div class="date-header">${ds.toUpperCase()}</div>`;
            lastDate = ds;
          }

          list.innerHTML += `
                    <div class="itinerary-item clickable-card" onclick="openDetail(${i.id})">
                        <div class="it-time">${ts}</div>
                        <div class="it-content">
                            <div class="it-title">${i.icon} ${i.title}</div>
                            <div class="it-desc">${i.desc}</div>
                        </div>
                        <div class="it-arrow">‚Ä∫</div>
                    </div>`;
        });
      }

      function openDetail(id) {
        if (!id) return;
        const item = itinerary.find((i) => i.id === id);
        if (!item) return;

        const modal = document.getElementById("detail-modal");
        const body = document.getElementById("modal-body");
        const dateStr = new Date(item.start).toLocaleDateString("pt-BR", {
          weekday: "long",
          day: "numeric",
        });
        const timeStr = new Date(item.start).toLocaleTimeString("pt-BR", {
          hour: "2-digit",
          minute: "2-digit",
        });

        let roleContent = "";
        if (userRole === "mom" && item.mom)
          roleContent = `<div class="role-box mom"><div>üë©</div><div><strong>Dica de M√£e:</strong><br>${item.mom}</div></div>`;
        if ((userRole === "dad" || userRole === "admin") && item.dad)
          roleContent = `<div class="role-box dad"><div>üë¥</div><div><strong>Hist√≥ria & Contexto:</strong><br>${item.dad}</div></div>`;

        let stepsHTML = "";
        if (item.steps) {
          stepsHTML = `<div class="mini-timeline">`;
          item.steps.forEach((s) => {
            stepsHTML += `
                        <div class="timeline-step">
                            <div class="step-title">${s.t}</div>
                            <div class="step-desc">${s.d}</div>
                        </div>`;
          });
          stepsHTML += `</div>`;
        }

        body.innerHTML = `
                <div style="text-align:center; margin-bottom:25px;">
                    <div style="font-size:4.5rem; margin-bottom:10px;">${
                      item.icon
                    }</div>
                    <h2 style="font-size:2rem; line-height:1.2; color:var(--primary);">${
                      item.title
                    }</h2>
                    <p style="color:var(--accent); font-weight:800; margin-top:5px; text-transform:uppercase; font-size:0.9rem;">${dateStr} ‚Ä¢ ${timeStr}</p>
                    ${
                      item.duration
                        ? `<div style="display:inline-block; background:#eee; padding:4px 10px; border-radius:10px; font-size:0.8rem; margin-top:5px;">‚è≥ Dura√ß√£o: ${item.duration}</div>`
                        : ""
                    }
                </div>
                
                <p style="font-size:1.1rem; line-height:1.6; color:#444;">${
                  item.desc
                }</p>
                
                ${stepsHTML}
                
                ${roleContent}
                
                <div style="margin-top:40px; text-align:center;">
                    <button onclick="closeDetail()" style="background:#eee; border:none; padding:15px 40px; border-radius:30px; font-weight:bold; color:#666;">Fechar</button>
                </div>
            `;
        modal.classList.add("open");
      }

      function openProtocolDetail(key) {
        const p = protocols[key];
        if (!p) return;

        const modal = document.getElementById("detail-modal");
        const body = document.getElementById("modal-body");

        body.innerHTML = `
                <div style="text-align:center; margin-bottom:25px;">
                    <div style="font-size:4.5rem; margin-bottom:10px;">${p.icon}</div>
                    <h2 style="font-size:2rem; line-height:1.2; color:var(--primary);">${p.title}</h2>
                    <p style="color:var(--accent); font-weight:800; margin-top:8px; text-transform:uppercase; font-size:0.85rem;">PROTOCOLO ‚Ä¢ POR QU√ä FUNCIONA</p>
                </div>

                <div class="card" style="margin-bottom:16px; padding:16px;">
                  <div style="font-weight:800; margin-bottom:6px; color:var(--primary);">Resumo</div>
                  <div style="color:#444; line-height:1.6; font-size:1rem;">${p.summary}</div>
                </div>

                <div class="card" style="margin-bottom:16px; padding:16px; background: var(--soft-blue); border: none;">
                  <div style="font-weight:800; margin-bottom:6px; color:var(--primary);">A ci√™ncia (vers√£o humana)</div>
                  <div style="color:#2c3e50; line-height:1.65; font-size:1rem;">${p.science}</div>
                </div>

                <div class="card" style="margin-bottom:16px; padding:16px;">
                  <div style="font-weight:800; margin-bottom:6px; color:var(--primary);">Como usar na pr√°tica</div>
                  <div style="color:#444; line-height:1.6; font-size:1rem;">${p.how}</div>
                </div>

                <div style="opacity:0.65; font-size:0.85rem; line-height:1.5; margin-top:10px;">
                  Nota: isso √© um guia pr√°tico de viagem, n√£o orienta√ß√£o m√©dica.
                </div>

                <div style="margin-top:30px; text-align:center;">
                    <button onclick="closeDetail()" style="background:#eee; border:none; padding:15px 40px; border-radius:30px; font-weight:bold; color:#666;">Fechar</button>
                </div>
            `;

        modal.classList.add("open");
      }

      function closeDetail() {
        document.getElementById("detail-modal").classList.remove("open");
      }

      function nav(tabId) {
        document
          .querySelectorAll(".nav-btn")
          .forEach((b) => b.classList.remove("active"));
        event.currentTarget.classList.add("active");
        document
          .querySelectorAll(".view")
          .forEach((v) => v.classList.remove("active"));
        document.getElementById("tab-" + tabId).classList.add("active");
        window.scrollTo(0, 0);
      }

      function resetApp() {
        localStorage.clear();
        location.reload();
      }

      init();
    </script>
  </body>
</html>
